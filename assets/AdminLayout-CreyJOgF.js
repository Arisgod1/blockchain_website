import{S as tt,C as et,o as X,B as M,L as H,b as Y,r as Z,_ as T,c as J,e as at,a as nt,f as ot}from"./index-D-0WS1lW.js";import it from"./AdminMeetingManager-CqSZuKF4.js";import rt from"./AdminMemberManager-BcWFP_Ad.js";import{l as K,r as y,x as q,k as G,e as Q,C as o,E as t,z as v,B as b,N as S,D as P,F as j,Q as O,I as lt,S as E,a0 as N,a1 as R,J as i,K as f,G as D,U as ut,j as st,a as dt,u as C}from"./vendor-vue-KPUYMlG2.js";import{g as ct,d as vt,u as mt,c as pt}from"./project-DD64YkpF.js";import{B}from"./BaseCard-Bn5_bvLP.js";import{B as W}from"./BasePagination-fICcZbZx.js";import{g as gt,d as ft,u as yt,c as ht}from"./article-YTzY_odD.js";import{e as bt}from"./utils-BZMi4_q3.js";import"./vendor-utils-B9ygI19o.js";import"./ListIcon.vue_vue_type_script_setup_true_lang-CZxNQ0Ja.js";import"./MeetingDetailModal-B7OgVz5h.js";import"./MemberCard-Onz5YwWw.js";import"./SearchIcon.vue_vue_type_script_setup_true_lang-BvzwYyad.js";import"./CalendarIcon-DZz_drup.js";const _t={class:"admin-project-manager"},$t={class:"manager-header"},kt={class:"header-actions"},wt={class:"projects-section"},Ct={key:0,class:"loading-container"},xt={key:1,class:"empty-state"},At={key:2,class:"projects-table-container"},Pt={class:"data-table"},Et={class:"actions-cell"},Mt=["onClick"],St=["onClick"],zt={key:3,class:"pagination-container"},Lt={class:"form-group"},Dt={class:"form-group"},Ft={class:"form-group"},Nt={class:"form-group"},Vt={class:"form-group"},Ut={class:"form-actions"},It=K({__name:"AdminProjectManager",setup(z){const r=y([]),c=y(!1),_=y(!1),x=y(1),k=y(1),A=y(0),g=y(10),h=y(!1),p=y(null),m=[],l=(s,e,a="success",L)=>{Z({entity:"projects",action:s,message:e,targetId:L,result:a}).catch(I=>{console.warn("è®°å½•é¡¹ç›®æ“ä½œæ—¥å¿—å¤±è´¥:",I)})},d=q({name:"",description:"",category:et.Development,status:tt.Planning,progress:0}),$=async()=>{c.value=!0;try{const s=await ct({page:x.value-1,size:g.value});Array.isArray(s)?(r.value=s,k.value=1,A.value=s.length):(r.value=s.content||[],k.value=s.totalPages||1,A.value=s.totalElements||r.value.length)}catch(s){console.error("Failed to fetch projects:",s)}finally{c.value=!1}},w=()=>{$(),l("refresh","æ‰‹åŠ¨åˆ·æ–°é¡¹ç›®åˆ—è¡¨")},V=s=>{x.value=s,$()},U=()=>{p.value=null,Object.assign(d,{name:"",description:"",category:et.Development,status:tt.Planning,progress:0}),h.value=!0},F=s=>{p.value=s,Object.assign(d,s),h.value=!0},u=async s=>{if(confirm(`ç¡®å®šè¦åˆ é™¤é¡¹ç›® "${s.name}" å—ï¼Ÿ`))try{await vt(s.id),$(),l("delete",`åˆ é™¤é¡¹ç›®ã€Œ${s.name}ã€`,"success",s.id)}catch{alert("åˆ é™¤å¤±è´¥"),l("delete",`åˆ é™¤é¡¹ç›®ã€Œ${s.name}ã€å¤±è´¥`,"failure",s.id)}},n=async()=>{var s;_.value=!0;try{if(p.value){const e=await mt(p.value.id,d);l("update",`æ›´æ–°é¡¹ç›®ã€Œ${e.name??p.value.name}ã€`,"success",p.value.id)}else{const e=await pt(d);l("create",`åˆ›å»ºé¡¹ç›®ã€Œ${e.name??d.name}ã€`,"success",e.id)}h.value=!1,$()}catch{alert("ä¿å­˜å¤±è´¥");const a=p.value?"update":"create";l(a,`ä¿å­˜é¡¹ç›®ã€Œ${d.name||"æœªå‘½åé¡¹ç›®"}ã€å¤±è´¥`,"failure",(s=p.value)==null?void 0:s.id)}finally{_.value=!1}};return G(()=>{$();const s=X(e=>{(e.entity==="all"||e.entity==="projects")&&($(),l("refresh",`å…¨å±€è§¦å‘ ${e.action??"refresh"} åŒæ­¥é¡¹ç›®æ•°æ®`))});m.push(s)}),Q(()=>{m.forEach(s=>s())}),(s,e)=>(i(),o("div",_t,[t("div",$t,[e[9]||(e[9]=t("h2",null,"é¡¹ç›®ç®¡ç†",-1)),t("div",kt,[v(M,{variant:"primary",onClick:U},{default:b(()=>[...e[7]||(e[7]=[S(" + æ–°å»ºé¡¹ç›® ",-1)])]),_:1}),v(M,{variant:"secondary",onClick:w},{default:b(()=>[...e[8]||(e[8]=[S(" åˆ·æ–° ",-1)])]),_:1})])]),t("div",wt,[v(B,{class:"content-card"},{default:b(()=>[c.value?(i(),o("div",Ct,[v(H)])):r.value.length===0?(i(),o("div",xt,[...e[10]||(e[10]=[t("p",null,"æš‚æ— é¡¹ç›®æ•°æ®",-1)])])):(i(),o("div",At,[t("table",Pt,[e[11]||(e[11]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"é¡¹ç›®åç§°"),t("th",null,"åˆ†ç±»"),t("th",null,"çŠ¶æ€"),t("th",null,"è¿›åº¦"),t("th",null,"æ“ä½œ")])],-1)),t("tbody",null,[(i(!0),o(j,null,O(r.value,a=>(i(),o("tr",{key:a.id},[t("td",null,f(a.id),1),t("td",null,f(a.name),1),t("td",null,f(a.category),1),t("td",null,[t("span",{class:D(["status-badge",String(a.status??"planning").toLowerCase()])},f(a.status||"æœªè®¾ç½®"),3)]),t("td",null,f(a.progress)+"%",1),t("td",Et,[t("button",{class:"action-btn edit",onClick:L=>F(a)}," ç¼–è¾‘ ",8,Mt),t("button",{class:"action-btn delete",onClick:L=>u(a)}," åˆ é™¤ ",8,St)])]))),128))])])])),k.value>1?(i(),o("div",zt,[v(W,{current:x.value,"page-size":g.value,total:A.value,onChange:V},null,8,["current","page-size","total"])])):P("",!0)]),_:1})]),v(Y,{show:h.value,"onUpdate:show":e[6]||(e[6]=a=>h.value=a),title:p.value?"ç¼–è¾‘é¡¹ç›®":"æ–°å»ºé¡¹ç›®"},{default:b(()=>[t("form",{class:"edit-form",onSubmit:lt(n,["prevent"])},[t("div",Lt,[e[12]||(e[12]=t("label",null,"é¡¹ç›®åç§°",-1)),E(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>d.name=a),type:"text",required:"",class:"form-input"},null,512),[[N,d.name]])]),t("div",Dt,[e[13]||(e[13]=t("label",null,"æè¿°",-1)),E(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>d.description=a),class:"form-textarea"},null,512),[[N,d.description]])]),t("div",Ft,[e[15]||(e[15]=t("label",null,"åˆ†ç±»",-1)),E(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>d.category=a),class:"form-select"},[...e[14]||(e[14]=[t("option",{value:"DEVELOPMENT"}," å¼€å‘ ",-1),t("option",{value:"RESEARCH"}," ç ”ç©¶ ",-1),t("option",{value:"COMPETITION"}," ç«èµ› ",-1)])],512),[[R,d.category]])]),t("div",Nt,[e[17]||(e[17]=t("label",null,"çŠ¶æ€",-1)),E(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>d.status=a),class:"form-select"},[...e[16]||(e[16]=[t("option",{value:"PLANNING"}," è§„åˆ’ä¸­ ",-1),t("option",{value:"ONGOING"}," è¿›è¡Œä¸­ ",-1),t("option",{value:"COMPLETED"}," å·²å®Œæˆ ",-1)])],512),[[R,d.status]])]),t("div",Vt,[e[18]||(e[18]=t("label",null,"è¿›åº¦ (%)",-1)),E(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>d.progress=a),type:"number",min:"0",max:"100",class:"form-input"},null,512),[[N,d.progress,void 0,{number:!0}]])]),t("div",Ut,[v(M,{type:"button",variant:"secondary",onClick:e[5]||(e[5]=a=>h.value=!1)},{default:b(()=>[...e[19]||(e[19]=[S(" å–æ¶ˆ ",-1)])]),_:1}),v(M,{type:"submit",variant:"primary",loading:_.value},{default:b(()=>[...e[20]||(e[20]=[S(" ä¿å­˜ ",-1)])]),_:1},8,["loading"])])],32)]),_:1},8,["show","title"])]))}}),Bt=T(It,[["__scopeId","data-v-eeb5d339"]]),jt={class:"admin-article-manager"},Ot={class:"manager-header"},Rt={class:"header-actions"},Tt={class:"articles-section"},Kt={key:0,class:"loading-container"},Gt={key:1,class:"empty-state"},qt={key:2,class:"articles-table-container"},Ht={class:"data-table"},Jt={class:"actions-cell"},Qt=["onClick"],Wt=["onClick"],Xt={key:3,class:"pagination-container"},Yt={class:"form-group"},Zt={class:"form-group"},te={class:"form-group"},ee={class:"form-group"},se={class:"form-group"},le={class:"checkbox-group"},ae={class:"form-actions"},ne=K({__name:"AdminArticleManager",setup(z){const r=y([]),c=y(!1),_=y(!1),x=y(1),k=y(10),A=y(1),g=y(0),h=y(!1),p=y(null),m=[],l=(s,e,a="success",L)=>{Z({entity:"articles",action:s,message:e,targetId:L,result:a}).catch(I=>{console.warn("è®°å½•æ–‡ç« æ“ä½œæ—¥å¿—å¤±è´¥:",I)})},d=q({title:"",summary:"",content:"",category:"",isPublished:!1}),$=async()=>{c.value=!0;try{const s=await gt({page:x.value-1,size:k.value});Array.isArray(s)?(r.value=s,A.value=1,g.value=s.length):(r.value=s.content||[],A.value=s.totalPages||1,g.value=s.totalElements||0)}catch(s){console.error("Failed to fetch articles:",s)}finally{c.value=!1}},w=()=>{$(),l("refresh","æ‰‹åŠ¨åˆ·æ–°æ–‡ç« åˆ—è¡¨")},V=s=>{x.value=s,$()},U=()=>{p.value=null,Object.assign(d,{title:"",summary:"",content:"",category:"",isPublished:!1}),h.value=!0},F=s=>{p.value=s,Object.assign(d,s),h.value=!0},u=async s=>{if(confirm(`ç¡®å®šè¦åˆ é™¤æ–‡ç«  "${s.title}" å—ï¼Ÿ`))try{await ft(s.id),$(),l("delete",`åˆ é™¤æ–‡ç« ã€Œ${s.title}ã€`,"success",s.id)}catch{alert("åˆ é™¤å¤±è´¥"),l("delete",`åˆ é™¤æ–‡ç« ã€Œ${s.title}ã€å¤±è´¥`,"failure",s.id)}},n=async()=>{var s;_.value=!0;try{if(p.value){const e=await yt(p.value.id,d);l("update",`æ›´æ–°æ–‡ç« ã€Œ${e.title??p.value.title}ã€`,"success",p.value.id)}else{const e=await ht(d);l("create",`åˆ›å»ºæ–‡ç« ã€Œ${e.title??d.title}ã€`,"success",e.id)}h.value=!1,$()}catch{alert("ä¿å­˜å¤±è´¥");const a=p.value?"update":"create";l(a,`ä¿å­˜æ–‡ç« ã€Œ${d.title||"æœªå‘½åæ–‡ç« "}ã€å¤±è´¥`,"failure",(s=p.value)==null?void 0:s.id)}finally{_.value=!1}};return G(()=>{$();const s=X(e=>{(e.entity==="all"||e.entity==="articles")&&($(),l("refresh",`å…¨å±€è§¦å‘ ${e.action??"refresh"} åŒæ­¥æ–‡ç« æ•°æ®`))});m.push(s)}),Q(()=>{m.forEach(s=>s())}),(s,e)=>(i(),o("div",jt,[t("div",Ot,[e[9]||(e[9]=t("h2",null,"æ–‡ç« ç®¡ç†",-1)),t("div",Rt,[v(M,{variant:"primary",onClick:U},{default:b(()=>[...e[7]||(e[7]=[S(" + æ–°å»ºæ–‡ç«  ",-1)])]),_:1}),v(M,{variant:"secondary",onClick:w},{default:b(()=>[...e[8]||(e[8]=[S(" åˆ·æ–° ",-1)])]),_:1})])]),t("div",Tt,[v(B,{class:"content-card"},{default:b(()=>[c.value?(i(),o("div",Kt,[v(H)])):r.value.length===0?(i(),o("div",Gt,[...e[10]||(e[10]=[t("p",null,"æš‚æ— æ–‡ç« æ•°æ®",-1)])])):(i(),o("div",qt,[t("table",Ht,[e[11]||(e[11]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"æ ‡é¢˜"),t("th",null,"ä½œè€…"),t("th",null,"åˆ†ç±»"),t("th",null,"å‘å¸ƒæ—¶é—´"),t("th",null,"çŠ¶æ€"),t("th",null,"æ“ä½œ")])],-1)),t("tbody",null,[(i(!0),o(j,null,O(r.value,a=>{var L;return i(),o("tr",{key:a.id},[t("td",null,f(a.id),1),t("td",null,f(a.title),1),t("td",null,f(((L=a.author)==null?void 0:L.name)||"æœªçŸ¥"),1),t("td",null,f(a.category),1),t("td",null,f(a.publishDate),1),t("td",null,[t("span",{class:D(["status-badge",a.isPublished?"published":"draft"])},f(a.isPublished?"å·²å‘å¸ƒ":"è‰ç¨¿"),3)]),t("td",Jt,[t("button",{class:"action-btn edit",onClick:I=>F(a)}," ç¼–è¾‘ ",8,Qt),t("button",{class:"action-btn delete",onClick:I=>u(a)}," åˆ é™¤ ",8,Wt)])])}),128))])])])),A.value>1?(i(),o("div",Xt,[v(W,{current:x.value,total:g.value,"page-size":k.value,onChange:V},null,8,["current","total","page-size"])])):P("",!0)]),_:1})]),v(Y,{show:h.value,"onUpdate:show":e[6]||(e[6]=a=>h.value=a),title:p.value?"ç¼–è¾‘æ–‡ç« ":"æ–°å»ºæ–‡ç« "},{default:b(()=>[t("form",{class:"edit-form",onSubmit:lt(n,["prevent"])},[t("div",Yt,[e[12]||(e[12]=t("label",null,"æ ‡é¢˜",-1)),E(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>d.title=a),type:"text",required:"",class:"form-input"},null,512),[[N,d.title]])]),t("div",Zt,[e[13]||(e[13]=t("label",null,"æ‘˜è¦",-1)),E(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>d.summary=a),class:"form-textarea"},null,512),[[N,d.summary]])]),t("div",te,[e[14]||(e[14]=t("label",null,"å†…å®¹",-1)),E(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=a=>d.content=a),class:"form-textarea content-editor"},null,512),[[N,d.content]])]),t("div",ee,[e[15]||(e[15]=t("label",null,"åˆ†ç±»",-1)),E(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>d.category=a),type:"text",class:"form-input"},null,512),[[N,d.category]])]),t("div",se,[e[17]||(e[17]=t("label",null,"çŠ¶æ€",-1)),t("div",le,[E(t("input",{id:"isPublished","onUpdate:modelValue":e[4]||(e[4]=a=>d.isPublished=a),type:"checkbox"},null,512),[[ut,d.isPublished]]),e[16]||(e[16]=t("label",{for:"isPublished"},"å‘å¸ƒ",-1))])]),t("div",ae,[v(M,{type:"button",variant:"secondary",onClick:e[5]||(e[5]=a=>h.value=!1)},{default:b(()=>[...e[18]||(e[18]=[S(" å–æ¶ˆ ",-1)])]),_:1}),v(M,{type:"submit",variant:"primary",loading:_.value},{default:b(()=>[...e[19]||(e[19]=[S(" ä¿å­˜ ",-1)])]),_:1},8,["loading"])])],32)]),_:1},8,["show","title"])]))}}),oe=T(ne,[["__scopeId","data-v-012cfd67"]]),ie=async z=>{const r=await J.get("/api/files",{params:z});if(!r.success)throw new Error(r.message||"è·å–æ–‡ä»¶åˆ—è¡¨å¤±è´¥");return bt(r.data,z)},re=async z=>{const r=new FormData;r.append("file",z);const c=await J.upload("/api/files/upload",r);if(!c.success)throw new Error(c.message||"ä¸Šä¼ æ–‡ä»¶å¤±è´¥");if(!c.data)throw new Error("ä¸Šä¼ æ–‡ä»¶æœªè¿”å›æ•°æ®");return c.data},ue=async z=>{const r=await J.delete(`/api/files/${z}`);if(!r.success)throw new Error(r.message||"åˆ é™¤æ–‡ä»¶å¤±è´¥")},de=async(z,r)=>{await J.download(`/api/files/download/${z}`,r)},ce={class:"admin-file-manager"},ve={class:"manager-header"},me={class:"header-actions"},pe={class:"files-section"},ge={key:0,class:"loading-container"},fe={key:1,class:"empty-state"},ye={key:2,class:"files-table-container"},he={class:"data-table"},be={class:"actions-cell"},_e=["onClick"],$e=["onClick"],ke={key:3,class:"pagination-container"},we=K({__name:"AdminFileManager",setup(z){const r=y([]),c=y(!1),_=y(1),x=y(10),k=y(1),A=y(0),g=y(null),h=[],p=(u,n,s="success",e)=>{Z({entity:"files",action:u,message:n,targetId:e,result:s}).catch(a=>{console.warn("è®°å½•æ–‡ä»¶æ“ä½œæ—¥å¿—å¤±è´¥:",a)})},m=async()=>{c.value=!0;try{const u=await ie({page:_.value-1,size:x.value});Array.isArray(u)?(r.value=u,k.value=1,A.value=u.length):(r.value=u.content||[],k.value=u.totalPages||1,A.value=u.totalElements||0)}catch(u){console.error("Failed to fetch files:",u)}finally{c.value=!1}},l=()=>{m(),p("refresh","æ‰‹åŠ¨åˆ·æ–°æ–‡ä»¶åˆ—è¡¨")},d=u=>{_.value=u,m()},$=()=>{var u;(u=g.value)==null||u.click()},w=async u=>{const n=u.target;if(n.files&&n.files.length>0){const s=n.files[0];try{await re(s),alert("ä¸Šä¼ æˆåŠŸ"),m(),p("create",`ä¸Šä¼ æ–‡ä»¶ã€Œ${s.name}ã€`,"success")}catch{alert("ä¸Šä¼ å¤±è´¥"),p("create",`ä¸Šä¼ æ–‡ä»¶ã€Œ${s.name}ã€å¤±è´¥`,"failure")}finally{n.value=""}}},V=async u=>{try{await de(u.id,u.originalName),p("export",`ä¸‹è½½æ–‡ä»¶ã€Œ${u.originalName}ã€`,"success",u.id)}catch{alert("ä¸‹è½½å¤±è´¥"),p("export",`ä¸‹è½½æ–‡ä»¶ã€Œ${u.originalName}ã€å¤±è´¥`,"failure",u.id)}},U=async u=>{if(confirm(`ç¡®å®šè¦åˆ é™¤æ–‡ä»¶ "${u.originalName}" å—ï¼Ÿ`))try{await ue(u.id),m(),p("delete",`åˆ é™¤æ–‡ä»¶ã€Œ${u.originalName}ã€`,"success",u.id)}catch{alert("åˆ é™¤å¤±è´¥"),p("delete",`åˆ é™¤æ–‡ä»¶ã€Œ${u.originalName}ã€å¤±è´¥`,"failure",u.id)}},F=u=>{if(u===0)return"0 B";const n=1024,s=["B","KB","MB","GB","TB"],e=Math.floor(Math.log(u)/Math.log(n));return parseFloat((u/Math.pow(n,e)).toFixed(2))+" "+s[e]};return G(()=>{m();const u=X(n=>{(n.entity==="all"||n.entity==="files")&&(m(),p("refresh",`å…¨å±€è§¦å‘ ${n.action??"refresh"} åŒæ­¥æ–‡ä»¶æ•°æ®`))});h.push(u)}),Q(()=>{h.forEach(u=>u())}),(u,n)=>(i(),o("div",ce,[t("div",ve,[n[2]||(n[2]=t("h2",null,"æ–‡ä»¶ç®¡ç†",-1)),t("div",me,[t("input",{ref_key:"fileInput",ref:g,type:"file",style:{display:"none"},onChange:w},null,544),v(M,{variant:"primary",onClick:$},{default:b(()=>[...n[0]||(n[0]=[S(" + ä¸Šä¼ æ–‡ä»¶ ",-1)])]),_:1}),v(M,{variant:"secondary",onClick:l},{default:b(()=>[...n[1]||(n[1]=[S(" åˆ·æ–° ",-1)])]),_:1})])]),t("div",pe,[v(B,{class:"content-card"},{default:b(()=>[c.value?(i(),o("div",ge,[v(H)])):r.value.length===0?(i(),o("div",fe,[...n[3]||(n[3]=[t("p",null,"æš‚æ— æ–‡ä»¶æ•°æ®",-1)])])):(i(),o("div",ye,[t("table",he,[n[4]||(n[4]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"æ–‡ä»¶å"),t("th",null,"å¤§å°"),t("th",null,"ç±»å‹"),t("th",null,"ä¸Šä¼ æ—¶é—´"),t("th",null,"ä¸‹è½½æ¬¡æ•°"),t("th",null,"æ“ä½œ")])],-1)),t("tbody",null,[(i(!0),o(j,null,O(r.value,s=>(i(),o("tr",{key:s.id},[t("td",null,f(s.id),1),t("td",null,f(s.originalName),1),t("td",null,f(F(s.fileSize)),1),t("td",null,f(s.fileType),1),t("td",null,f(s.uploadTime),1),t("td",null,f(s.downloadCount),1),t("td",be,[t("button",{class:"action-btn download",onClick:e=>V(s)}," ä¸‹è½½ ",8,_e),t("button",{class:"action-btn delete",onClick:e=>U(s)}," åˆ é™¤ ",8,$e)])]))),128))])])])),k.value>1?(i(),o("div",ke,[v(W,{current:_.value,total:A.value,"page-size":x.value,onChange:d},null,8,["current","total","page-size"])])):P("",!0)]),_:1})])]))}}),Ce=T(we,[["__scopeId","data-v-be1d0f89"]]),xe={class:"admin-log-viewer"},Ae={class:"viewer-header"},Pe={class:"header-actions"},Ee={class:"log-stats"},Me={class:"stat-value"},Se={class:"stat-value"},ze={class:"stat-value"},Le={class:"filters"},De=["value"],Fe=["value"],Ne={key:0,class:"loading-state"},Ve={key:1,class:"empty-state"},Ue={key:2,class:"table-wrapper"},Ie={class:"log-table"},Be={class:"pill"},je={class:"message"},Oe={key:0,class:"metadata"},Re={key:3,class:"pagination"},Te=K({__name:"AdminLogViewer",setup(z){const{logs:r,loading:c,totalLogs:_,lastLog:x,loadLogs:k,removeAllLogs:A}=at(),g=q({search:"",entity:"all",action:"all",result:"all"}),h=q({current:1,pageSize:10}),p=[{label:"ä¾‹ä¼š",value:"meetings"},{label:"æˆå‘˜",value:"members"},{label:"é¡¹ç›®",value:"projects"},{label:"æ–‡ç« ",value:"articles"},{label:"æ–‡ä»¶",value:"files"},{label:"æ—¥å¿—",value:"logs"},{label:"çœ‹æ¿",value:"dashboard"}],m=[{label:"åˆ›å»º",value:"create"},{label:"æ›´æ–°",value:"update"},{label:"åˆ é™¤",value:"delete"},{label:"åˆ·æ–°",value:"refresh"},{label:"å¤åˆ¶",value:"duplicate"},{label:"å¯¼å…¥",value:"import"},{label:"å¯¼å‡º",value:"export"},{label:"ç™»å½•",value:"login"},{label:"é€€å‡º",value:"logout"}],l=st(()=>r.value.filter(n=>{const s=g.entity==="all"||n.entity===g.entity,e=g.action==="all"||n.action===g.action,a=g.result==="all"||n.result===g.result,L=g.search.trim().toLowerCase(),I=L?n.message.toLowerCase().includes(L)||(n.operator||"").toLowerCase().includes(L):!0;return s&&e&&a&&I})),d=st(()=>{const n=(h.current-1)*h.pageSize,s=n+h.pageSize;return l.value.slice(n,s)}),$=n=>{h.current=n},w=async()=>{r.value.length!==0&&confirm("ç¡®è®¤æ¸…ç©ºæ‰€æœ‰ç®¡ç†å‘˜æ“ä½œæ—¥å¿—å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚")&&await A()},V=n=>{const s=p.find(e=>e.value===n);return(s==null?void 0:s.label)??n},U=n=>{const s=m.find(e=>e.value===n);return(s==null?void 0:s.label)??n},F=n=>new Date(n).toLocaleString("zh-CN",{hour12:!1}),u=n=>{try{return Object.entries(n).map(([s,e])=>`${s}: ${e}`).join(" | ")}catch{return""}};return dt(()=>[g.search,g.entity,g.action,g.result],()=>{h.current=1}),G(()=>{k()}),(n,s)=>(i(),o("div",xe,[t("div",Ae,[s[6]||(s[6]=t("div",null,[t("h2",null,"æ“ä½œæ—¥å¿—"),t("p",{class:"subtext"}," å®æ—¶è¿½è¸ªç®¡ç†å‘˜åœ¨åå°çš„æ‰€æœ‰å…³é”®æ“ä½œ ")],-1)),t("div",Pe,[v(C(M),{variant:"secondary",loading:C(c),onClick:C(k)},{default:b(()=>[...s[4]||(s[4]=[S(" åˆ·æ–° ",-1)])]),_:1},8,["loading","onClick"]),v(C(M),{variant:"danger",disabled:C(r).length===0,onClick:w},{default:b(()=>[...s[5]||(s[5]=[S(" æ¸…ç©ºæ—¥å¿— ",-1)])]),_:1},8,["disabled"])])]),t("div",Ee,[v(C(B),{class:"stat-card"},{default:b(()=>[s[7]||(s[7]=t("div",{class:"stat-label"}," æ—¥å¿—æ€»æ•° ",-1)),t("div",Me,f(C(_)),1)]),_:1}),v(C(B),{class:"stat-card"},{default:b(()=>[s[8]||(s[8]=t("div",{class:"stat-label"}," æœ€è¿‘ä¸€æ¡ ",-1)),t("div",Se,f(C(x)?F(C(x).timestamp):"-"),1)]),_:1}),v(C(B),{class:"stat-card"},{default:b(()=>[s[9]||(s[9]=t("div",{class:"stat-label"}," ç­›é€‰ç»“æœ ",-1)),t("div",ze,f(l.value.length),1)]),_:1})]),v(C(B),null,{default:b(()=>[t("div",Le,[E(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>g.search=e),class:"filter-input",placeholder:"æœç´¢æè¿°æˆ–æ“ä½œäºº"},null,512),[[N,g.search]]),E(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>g.entity=e)},[s[10]||(s[10]=t("option",{value:"all"}," å…¨éƒ¨å®ä½“ ",-1)),(i(),o(j,null,O(p,e=>t("option",{key:e.value,value:e.value},f(e.label),9,De)),64))],512),[[R,g.entity]]),E(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>g.action=e)},[s[11]||(s[11]=t("option",{value:"all"}," å…¨éƒ¨åŠ¨ä½œ ",-1)),(i(),o(j,null,O(m,e=>t("option",{key:e.value,value:e.value},f(e.label),9,Fe)),64))],512),[[R,g.action]]),E(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>g.result=e)},[...s[12]||(s[12]=[t("option",{value:"all"}," å…¨éƒ¨ç»“æœ ",-1),t("option",{value:"success"}," æˆåŠŸ ",-1),t("option",{value:"failure"}," å¤±è´¥ ",-1)])],512),[[R,g.result]])]),C(c)?(i(),o("div",Ne,[v(C(H)),s[13]||(s[13]=t("p",null,"åŠ è½½æ—¥å¿—ä¸­...",-1))])):d.value.length===0?(i(),o("div",Ve,[...s[14]||(s[14]=[t("p",null,"æš‚æ— ç¬¦åˆæ¡ä»¶çš„æ—¥å¿—è®°å½•",-1)])])):(i(),o("div",Ue,[t("table",Ie,[s[15]||(s[15]=t("thead",null,[t("tr",null,[t("th",null,"æ—¶é—´"),t("th",null,"å®ä½“"),t("th",null,"æ“ä½œ"),t("th",null,"æè¿°"),t("th",null,"æ“ä½œäºº"),t("th",null,"çŠ¶æ€")])],-1)),t("tbody",null,[(i(!0),o(j,null,O(d.value,e=>(i(),o("tr",{key:e.id},[t("td",null,f(F(e.timestamp)),1),t("td",null,[t("span",Be,f(V(e.entity)),1)]),t("td",null,f(U(e.action)),1),t("td",null,[t("div",je,f(e.message),1),e.metadata?(i(),o("small",Oe,f(u(e.metadata)),1)):P("",!0)]),t("td",null,f(e.operator||"ç³»ç»Ÿ"),1),t("td",null,[t("span",{class:D(["result-pill",e.result])},f(e.result==="success"?"æˆåŠŸ":"å¤±è´¥"),3)])]))),128))])])])),l.value.length>h.pageSize?(i(),o("div",Re,[v(C(W),{current:h.current,"page-size":h.pageSize,total:l.value.length,onChange:$},null,8,["current","page-size","total"])])):P("",!0)]),_:1})]))}}),Ke=T(Te,[["__scopeId","data-v-79a86e5e"]]),Ge={class:"admin-layout"},qe={class:"admin-header"},He={class:"header-content"},Je={class:"header-left"},Qe={class:"header-right"},We={class:"admin-user"},Xe={class:"user-info"},Ye={class:"user-name"},Ze={class:"user-role"},ts={class:"admin-body"},es={class:"sidebar-nav"},ss={class:"nav-section"},ls={key:0,class:"nav-section-title"},as={class:"nav-list"},ns={class:"nav-item"},os={key:0,class:"nav-text"},is={class:"nav-item"},rs={key:0,class:"nav-text"},us={class:"nav-item"},ds={key:0,class:"nav-text"},cs={class:"nav-item"},vs={key:0,class:"nav-text"},ms={class:"nav-item"},ps={key:0,class:"nav-text"},gs={class:"nav-section"},fs={key:0,class:"nav-section-title"},ys={class:"nav-list"},hs={class:"nav-item"},bs={key:0,class:"nav-text"},_s={class:"nav-item"},$s={key:0,class:"nav-text"},ks={class:"admin-main"},ws={class:"main-content"},Cs={key:0,class:"tab-content"},xs={key:1,class:"tab-content"},As={key:2,class:"tab-content"},Ps={key:3,class:"tab-content"},Es={key:4,class:"tab-content"},Ms={key:5,class:"tab-content"},Ss={key:6,class:"tab-content"},zs={key:7,class:"tab-content"},Ls=K({__name:"AdminLayout",setup(z){nt({title:"ç®¡ç†å‘˜åå°",meta:[{name:"description",content:"åŒºå—é“¾ç»„å®˜æ–¹ç½‘ç«™ç®¡ç†å‘˜åå°"}]});const r=y(!1),c=y("welcome"),_=y(!1),x=y(!1),k=y(null),A=m=>{if((m.ctrlKey||m.metaKey)&&m.key==="m"&&(m.preventDefault(),r.value=!r.value),m.ctrlKey||m.metaKey){const d={1:"meetings",2:"members",3:"projects",4:"articles",5:"settings",6:"logs"}[m.key];d&&(m.preventDefault(),c.value=d)}m.key==="F5"&&(m.preventDefault(),g())},g=()=>{ot({entity:"all",action:"refresh"})},h=()=>{console.log("ğŸšª handleCloseAdmin è¢«è°ƒç”¨"),_.value=!0,console.log("ğŸ“‹ confirmExitModal è®¾ç½®ä¸º:",_.value)},p=async()=>{console.log("âœ… confirmExit è¢«è°ƒç”¨"),x.value=!0;try{console.log("â³ å¼€å§‹é€€å‡ºå¤„ç†..."),await new Promise(m=>setTimeout(m,500)),console.log("â³ é€€å‡ºå¤„ç†å®Œæˆ"),console.log("ğŸ§¹ æ¸…é™¤ç®¡ç†å‘˜çŠ¶æ€..."),k.value=null,localStorage.removeItem("adminToken"),localStorage.removeItem("admin-user"),console.log("ğŸ§¹ çŠ¶æ€æ¸…é™¤å®Œæˆ"),console.log("ğŸ“¢ è§¦å‘ admin-exit äº‹ä»¶"),window.dispatchEvent(new CustomEvent("admin-exit")),console.log("ğŸ“¢ admin-exit äº‹ä»¶å·²å‘é€")}catch(m){console.error("é€€å‡ºå¤±è´¥:",m)}finally{x.value=!1,_.value=!1,console.log("ğŸ confirmExit å®Œæˆï¼Œå¼¹çª—å·²å…³é—­")}};return G(()=>{const m=localStorage.getItem("admin-user");if(m)try{k.value=JSON.parse(m)}catch(l){console.error("è§£æç®¡ç†å‘˜ä¿¡æ¯å¤±è´¥:",l)}document.addEventListener("keydown",A)}),Q(()=>{document.removeEventListener("keydown",A)}),(m,l)=>{var d,$;return i(),o("div",Ge,[t("header",qe,[t("div",He,[t("div",Je,[t("button",{class:"menu-toggle",onClick:l[0]||(l[0]=w=>r.value=!r.value)}," â˜° "),l[10]||(l[10]=t("div",{class:"logo-section"},[t("h1",{class:"admin-title"}," ç®¡ç†å‘˜åå° ")],-1))]),t("div",Qe,[t("div",{class:"header-actions"},[t("button",{class:"action-btn refresh-btn",title:"åˆ·æ–°æ•°æ®",onClick:g}," ğŸ”„ "),t("button",{class:"action-btn close-admin-btn",title:"é€€å‡ºç®¡ç†å‘˜æ¨¡å¼",onClick:h}," ğŸšª ")]),t("div",We,[t("div",Xe,[t("span",Ye,f(((d=k.value)==null?void 0:d.username)||"ç®¡ç†å‘˜"),1),t("span",Ze,f((($=k.value)==null?void 0:$.role)||"Admin"),1)])])])])]),t("div",ts,[t("aside",{class:D(["admin-sidebar",{collapsed:r.value}])},[t("nav",es,[t("div",ss,[r.value?P("",!0):(i(),o("h3",ls," åŠŸèƒ½ç®¡ç† ")),t("ul",as,[t("li",ns,[t("button",{class:D(["nav-link",{active:c.value==="meetings"}]),title:"ä¾‹ä¼šç®¡ç†",onClick:l[1]||(l[1]=w=>c.value="meetings")},[l[11]||(l[11]=t("span",{class:"nav-icon"},"ğŸ“‹",-1)),r.value?P("",!0):(i(),o("span",os,"ä¾‹ä¼šç®¡ç†"))],2)]),t("li",is,[t("button",{class:D(["nav-link",{active:c.value==="members"}]),title:"æˆå‘˜ç®¡ç†",onClick:l[2]||(l[2]=w=>c.value="members")},[l[12]||(l[12]=t("span",{class:"nav-icon"},"ğŸ‘¥",-1)),r.value?P("",!0):(i(),o("span",rs,"æˆå‘˜ç®¡ç†"))],2)]),t("li",us,[t("button",{class:D(["nav-link",{active:c.value==="projects"}]),title:"é¡¹ç›®ç®¡ç†",onClick:l[3]||(l[3]=w=>c.value="projects")},[l[13]||(l[13]=t("span",{class:"nav-icon"},"ğŸ“Š",-1)),r.value?P("",!0):(i(),o("span",ds,"é¡¹ç›®ç®¡ç†"))],2)]),t("li",cs,[t("button",{class:D(["nav-link",{active:c.value==="articles"}]),title:"å†…å®¹ç®¡ç†",onClick:l[4]||(l[4]=w=>c.value="articles")},[l[14]||(l[14]=t("span",{class:"nav-icon"},"ğŸ“",-1)),r.value?P("",!0):(i(),o("span",vs,"å†…å®¹ç®¡ç†"))],2)]),t("li",ms,[t("button",{class:D(["nav-link",{active:c.value==="files"}]),title:"æ–‡ä»¶ç®¡ç†",onClick:l[5]||(l[5]=w=>c.value="files")},[l[15]||(l[15]=t("span",{class:"nav-icon"},"ğŸ“",-1)),r.value?P("",!0):(i(),o("span",ps,"æ–‡ä»¶ç®¡ç†"))],2)])])]),t("div",gs,[r.value?P("",!0):(i(),o("h3",fs," ç³»ç»Ÿè®¾ç½® ")),t("ul",ys,[t("li",hs,[t("button",{class:D(["nav-link",{active:c.value==="settings"}]),title:"ç³»ç»Ÿè®¾ç½®",onClick:l[6]||(l[6]=w=>c.value="settings")},[l[16]||(l[16]=t("span",{class:"nav-icon"},"âš™ï¸",-1)),r.value?P("",!0):(i(),o("span",bs,"ç³»ç»Ÿè®¾ç½®"))],2)]),t("li",_s,[t("button",{class:D(["nav-link",{active:c.value==="logs"}]),title:"æ“ä½œæ—¥å¿—",onClick:l[7]||(l[7]=w=>c.value="logs")},[l[17]||(l[17]=t("span",{class:"nav-icon"},"ğŸ“„",-1)),r.value?P("",!0):(i(),o("span",$s,"æ“ä½œæ—¥å¿—"))],2)])])])])],2),t("main",ks,[t("div",ws,[c.value==="meetings"?(i(),o("div",Cs,[v(it)])):c.value==="members"?(i(),o("div",xs,[v(rt)])):c.value==="projects"?(i(),o("div",As,[v(Bt)])):c.value==="articles"?(i(),o("div",Ps,[v(oe)])):c.value==="files"?(i(),o("div",Es,[v(Ce)])):c.value==="settings"?(i(),o("div",Ms,[...l[18]||(l[18]=[t("div",{class:"coming-soon"},[t("div",{class:"coming-soon-icon"}," âš™ï¸ "),t("h2",null,"ç³»ç»Ÿè®¾ç½®"),t("p",null,"è¯¥åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…...")],-1)])])):c.value==="logs"?(i(),o("div",Ss,[v(Ke)])):(i(),o("div",zs,[...l[19]||(l[19]=[t("div",{class:"welcome-section"},[t("h2",null,"æ¬¢è¿ä½¿ç”¨ç®¡ç†å‘˜åå°"),t("p",null,"é€‰æ‹©å·¦ä¾§èœå•å¼€å§‹ç®¡ç†åŠŸèƒ½")],-1)])]))])])]),v(C(Y),{show:_.value,"onUpdate:show":l[9]||(l[9]=w=>_.value=w),title:"ç¡®è®¤é€€å‡º",size:"sm"},{footer:b(()=>[v(C(M),{variant:"secondary",onClick:l[8]||(l[8]=w=>_.value=!1)},{default:b(()=>[...l[20]||(l[20]=[S(" å–æ¶ˆ ",-1)])]),_:1}),v(C(M),{variant:"danger",loading:x.value,onClick:p},{default:b(()=>[...l[21]||(l[21]=[S(" ç¡®è®¤é€€å‡º ",-1)])]),_:1},8,["loading"])]),default:b(()=>[l[22]||(l[22]=t("p",null,"ç¡®å®šè¦é€€å‡ºç®¡ç†å‘˜åå°å—ï¼Ÿ",-1)),l[23]||(l[23]=t("p",{class:"warning-text"}," é€€å‡ºåéœ€è¦é‡æ–°éªŒè¯èº«ä»½æ‰èƒ½è¿›å…¥ã€‚ ",-1))]),_:1},8,["show"])])}}}),Js=T(Ls,[["__scopeId","data-v-607e812f"]]);export{Js as default};
//# sourceMappingURL=AdminLayout-CreyJOgF.js.map
