{"version":3,"file":"article-yFRGJfri.js","sources":["../../src/api/article.ts"],"sourcesContent":["import apiService from '@/api/client'\r\nimport type { Article } from '@/types/entities'\r\nimport { ensurePagedData, type PaginationParams, type PageResult } from '@/api/utils'\r\n\r\nexport type PageArticle = PageResult<Article>\r\n\r\n// 获取分页文章列表\r\nexport const getArticles = async (params?: PaginationParams & Record<string, unknown>): Promise<PageArticle> => {\r\n  const res = await apiService.get<PageArticle | Article[]>('/api/posts', { params })\r\n  if (!res.success) throw new Error(res.message || '获取文章列表失败')\r\n  return ensurePagedData<Article>(res.data, params)\r\n}\r\n\r\n// 根据 ID 获取单个文章\r\nexport const getArticle = async (id: string | number): Promise<Article | null> => {\r\n  const res = await apiService.get<Article>(`/api/posts/${id}`)\r\n  if (!res.success) throw new Error(res.message || '获取文章失败')\r\n  return res.data ?? null\r\n}\r\n\r\n// 创建新文章\r\nexport const createArticle = async (payload: Partial<Article>): Promise<Article> => {\r\n  const res = await apiService.post<Article>('/api/posts', payload)\r\n  if (!res.success) throw new Error(res.message || '创建文章失败')\r\n  if (!res.data) throw new Error('创建文章未返回数据')\r\n  return res.data\r\n}\r\n\r\n// 更新文章\r\nexport const updateArticle = async (id: string | number, payload: Partial<Article>): Promise<Article> => {\r\n  const res = await apiService.put<Article>(`/api/posts/${id}`, payload)\r\n  if (!res.success) throw new Error(res.message || '更新文章失败')\r\n  if (!res.data) throw new Error('更新文章未返回数据')\r\n  return res.data\r\n}\r\n\r\n// 删除文章\r\nexport const deleteArticle = async (id: string | number): Promise<void> => {\r\n  const res = await apiService.delete(`/api/posts/${id}`)\r\n  if (!res.success) throw new Error(res.message || '删除文章失败')\r\n}\r\n\r\n"],"names":["getArticles","params","res","apiService","ensurePagedData","createArticle","payload","updateArticle","id","deleteArticle"],"mappings":"gFAOO,MAAMA,EAAc,MAAOC,GAA8E,CAC9G,MAAMC,EAAM,MAAMC,EAAW,IAA6B,aAAc,CAAE,OAAAF,EAAQ,EAClF,GAAI,CAACC,EAAI,QAAS,MAAM,IAAI,MAAMA,EAAI,SAAW,UAAU,EAC3D,OAAOE,EAAyBF,EAAI,KAAMD,CAAM,CAClD,EAUaI,EAAgB,MAAOC,GAAgD,CAClF,MAAMJ,EAAM,MAAMC,EAAW,KAAc,aAAcG,CAAO,EAChE,GAAI,CAACJ,EAAI,QAAS,MAAM,IAAI,MAAMA,EAAI,SAAW,QAAQ,EACzD,GAAI,CAACA,EAAI,KAAM,MAAM,IAAI,MAAM,WAAW,EAC1C,OAAOA,EAAI,IACb,EAGaK,EAAgB,MAAOC,EAAqBF,IAAgD,CACvG,MAAMJ,EAAM,MAAMC,EAAW,IAAa,cAAcK,CAAE,GAAIF,CAAO,EACrE,GAAI,CAACJ,EAAI,QAAS,MAAM,IAAI,MAAMA,EAAI,SAAW,QAAQ,EACzD,GAAI,CAACA,EAAI,KAAM,MAAM,IAAI,MAAM,WAAW,EAC1C,OAAOA,EAAI,IACb,EAGaO,EAAgB,MAAOD,GAAuC,CACzE,MAAMN,EAAM,MAAMC,EAAW,OAAO,cAAcK,CAAE,EAAE,EACtD,GAAI,CAACN,EAAI,QAAS,MAAM,IAAI,MAAMA,EAAI,SAAW,QAAQ,CAC3D"}