{"version":3,"file":"BasePagination-DIsNkk6n.js","sources":["../../src/components/common/BasePagination.vue"],"sourcesContent":["<template>\r\n  <nav\r\n    :class=\"navClasses\"\r\n    role=\"navigation\"\r\n    aria-label=\"分页导航\"\r\n  >\r\n    <!-- 每页显示数量选择器 -->\r\n    <div\r\n      v-if=\"showPageSize\"\r\n      :class=\"pageSizeContainerClasses\"\r\n    >\r\n      <label\r\n        :for=\"pageSizeId\"\r\n        :class=\"pageSizeLabelClasses\"\r\n      >\r\n        每页显示\r\n      </label>\r\n      <select\r\n        :id=\"pageSizeId\"\r\n        :value=\"pageSize\"\r\n        :class=\"pageSizeSelectClasses\"\r\n        @change=\"handlePageSizeChange\"\r\n      >\r\n        <option \r\n          v-for=\"size in pageSizeOptions\" \r\n          :key=\"size\"\r\n          :value=\"size\"\r\n        >\r\n          {{ size }}\r\n        </option>\r\n      </select>\r\n      <span :class=\"pageSizeSuffixClasses\">条</span>\r\n    </div>\r\n\r\n    <!-- 分页按钮组 -->\r\n    <div :class=\"paginationClasses\">\r\n      <!-- 上一页 -->\r\n      <button\r\n        :disabled=\"displayedCurrent <= 1\"\r\n        :class=\"getPageButtonClasses(false, true)\"\r\n        @click=\"goToPage(displayedCurrent - 1)\"\r\n      >\r\n        <svg\r\n          class=\"w-4 h-4 mr-1\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n            stroke-width=\"2\"\r\n            d=\"M15 19l-7-7 7-7\"\r\n          />\r\n        </svg>\r\n        上一页\r\n      </button>\r\n\r\n      <!-- 页码按钮 -->\r\n      <div :class=\"pageNumbersClasses\">\r\n        <template\r\n          v-for=\"page in visiblePages\"\r\n          :key=\"page.key\"\r\n        >\r\n          <!-- 省略号 -->\r\n          <span \r\n            v-if=\"page.value === '...'\" \r\n            :class=\"ellipsisClasses\"\r\n          >\r\n            ...\r\n          </span>\r\n          <!-- 页码按钮 -->\r\n          <button\r\n            v-else\r\n            :class=\"getPageButtonClasses(page.value === displayedCurrent)\"\r\n            :disabled=\"page.value === displayedCurrent\"\r\n            @click=\"goToPage(page.value as number)\"\r\n          >\r\n            {{ page.value }}\r\n          </button>\r\n        </template>\r\n      </div>\r\n\r\n      <!-- 下一页 -->\r\n      <button\r\n        :disabled=\"displayedCurrent >= totalPages\"\r\n        :class=\"getPageButtonClasses(false, true)\"\r\n        @click=\"goToPage(displayedCurrent + 1)\"\r\n      >\r\n        下一页\r\n        <svg\r\n          class=\"w-4 h-4 ml-1\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n            stroke-width=\"2\"\r\n            d=\"M9 5l7 7-7 7\"\r\n          />\r\n        </svg>\r\n      </button>\r\n    </div>\r\n\r\n    <!-- 分页信息 -->\r\n    <div\r\n      v-if=\"showInfo\"\r\n      :class=\"infoClasses\"\r\n    >\r\n      显示第 <span :class=\"infoHighlightClasses\">{{ startItem }}</span> - <span :class=\"infoHighlightClasses\">{{ endItem }}</span> 条，\r\n      共 <span :class=\"infoHighlightClasses\">{{ total }}</span> 条记录\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed } from 'vue'\r\n\r\ninterface Props {\r\n  currentPage?: number\r\n  current?: number\r\n  pageSize: number\r\n  total: number\r\n  pageSizeOptions?: number[]\r\n  showPageSize?: boolean\r\n  showInfo?: boolean\r\n  maxVisiblePages?: number\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  currentPage: undefined,\r\n  current: undefined,\r\n  pageSizeOptions: () => [10, 20, 50, 100],\r\n  showPageSize: true,\r\n  showInfo: true,\r\n  maxVisiblePages: 7\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  'update:currentPage': [page: number]\r\n  'update:current': [page: number]\r\n  'update:pageSize': [size: number]\r\n  'pageChange': [page: number]\r\n  'pageSizeChange': [size: number]\r\n}>()\r\n\r\n// Support both `currentPage` and `current` (v-model:current) for backward compatibility\r\nconst displayedCurrent = computed(() => props.currentPage ?? props.current ?? 1)\r\n\r\nconst pageSizeId = `page-size-${Math.random().toString(36).substr(2, 9)}`\r\n\r\n// 计算属性\r\nconst totalPages = computed(() => Math.ceil(props.total / props.pageSize))\r\n\r\nconst startItem = computed(() => {\r\n  return props.total === 0 ? 0 : (displayedCurrent.value - 1) * props.pageSize + 1\r\n})\r\n\r\nconst endItem = computed(() => {\r\n  return Math.min(displayedCurrent.value * props.pageSize, props.total)\r\n})\r\n\r\n// 计算可见的页码\r\ninterface PageDescriptor {\r\n  key: string\r\n  value: number | string\r\n}\r\n\r\nconst visiblePages = computed<PageDescriptor[]>(() => {\r\n  const makeKey = (value: number | string, indexHint: number) => {\r\n    return typeof value === 'number'\r\n      ? `page-${value}`\r\n      : `ellipsis-${indexHint}`\r\n  }\r\n\r\n  if (totalPages.value <= props.maxVisiblePages) {\r\n    return Array.from({ length: totalPages.value }, (_, i) => ({\r\n      value: i + 1,\r\n      key: `page-${i + 1}`\r\n    }))\r\n  }\r\n\r\n  const pages: PageDescriptor[] = []\r\n  const half = Math.floor(props.maxVisiblePages / 2)\r\n  \r\n  let start = Math.max(1, displayedCurrent.value - half)\r\n  const end = Math.min(totalPages.value, start + props.maxVisiblePages - 1)\r\n  \r\n  if (end - start + 1 < props.maxVisiblePages) {\r\n    start = Math.max(1, end - props.maxVisiblePages + 1)\r\n  }\r\n  \r\n  if (start > 1) {\r\n    pages.push({ value: 1, key: makeKey(1, pages.length) })\r\n    if (start > 2) {\r\n      pages.push({ value: '...', key: makeKey('...', pages.length) })\r\n    }\r\n  }\r\n  \r\n  for (let i = start; i <= end; i++) {\r\n    pages.push({ value: i, key: makeKey(i, pages.length) })\r\n  }\r\n  \r\n  if (end < totalPages.value) {\r\n    if (end < totalPages.value - 1) {\r\n      pages.push({ value: '...', key: makeKey('...', pages.length) })\r\n    }\r\n    pages.push({ value: totalPages.value, key: makeKey(totalPages.value, pages.length) })\r\n  }\r\n  \r\n  return pages\r\n})\r\n\r\n// 样式类\r\nconst navClasses = [\r\n  'flex',\r\n  'items-center',\r\n  'justify-between',\r\n  'flex-wrap',\r\n  'gap-4',\r\n  'py-4'\r\n]\r\n\r\nconst pageSizeContainerClasses = [\r\n  'flex',\r\n  'items-center',\r\n  'gap-2',\r\n  'text-sm'\r\n]\r\n\r\nconst pageSizeLabelClasses = [\r\n  'text-neutral-600',\r\n  'whitespace-nowrap'\r\n]\r\n\r\nconst pageSizeSelectClasses = [\r\n  'px-3',\r\n  'py-1',\r\n  'border',\r\n  'border-neutral-300',\r\n  'rounded-lg',\r\n  'bg-white',\r\n  'text-sm',\r\n  'focus:outline-none',\r\n  'focus:ring-2',\r\n  'focus:ring-primary-500',\r\n  'focus:border-transparent'\r\n]\r\n\r\nconst pageSizeSuffixClasses = [\r\n  'text-neutral-600',\r\n  'whitespace-nowrap'\r\n]\r\n\r\nconst paginationClasses = [\r\n  'flex',\r\n  'items-center',\r\n  'gap-2'\r\n]\r\n\r\nconst pageNumbersClasses = [\r\n  'flex',\r\n  'items-center',\r\n  'gap-1'\r\n]\r\n\r\nconst ellipsisClasses = [\r\n  'px-2',\r\n  'py-1',\r\n  'text-neutral-400',\r\n  'select-none'\r\n]\r\n\r\nconst infoClasses = [\r\n  'text-sm',\r\n  'text-neutral-600',\r\n  'whitespace-nowrap'\r\n]\r\n\r\nconst infoHighlightClasses = [\r\n  'font-medium',\r\n  'text-neutral-800'\r\n]\r\n\r\n// 获取页码按钮样式\r\nfunction getPageButtonClasses(active = false, isNavButton = false) {\r\n  const baseClasses = [\r\n    'px-3',\r\n    'py-2',\r\n    'text-sm',\r\n    'font-medium',\r\n    'transition-colors',\r\n    'rounded-lg',\r\n    'focus:outline-none',\r\n    'focus:ring-2',\r\n    'focus:ring-offset-1'\r\n  ]\r\n  \r\n  if (isNavButton) {\r\n    baseClasses.push(\r\n      'inline-flex',\r\n      'items-center',\r\n      'gap-1'\r\n    )\r\n  }\r\n  \r\n  if (active) {\r\n    baseClasses.push(\r\n      'bg-primary-600',\r\n      'text-white',\r\n      'cursor-default'\r\n    )\r\n  } else {\r\n    baseClasses.push(\r\n      'text-neutral-600',\r\n      'hover:text-neutral-800',\r\n      'hover:bg-neutral-50',\r\n      'focus:ring-primary-500'\r\n    )\r\n  }\r\n  \r\n  if (displayedCurrent.value <= 1 && !isNavButton) {\r\n    baseClasses.push('cursor-not-allowed', 'opacity-50')\r\n  } else if (displayedCurrent.value >= totalPages.value && !isNavButton) {\r\n    baseClasses.push('cursor-not-allowed', 'opacity-50')\r\n  }\r\n  \r\n  return baseClasses\r\n}\r\n\r\n// 事件处理函数\r\nfunction goToPage(page: number) {\r\n  if (page < 1 || page > totalPages.value || page === displayedCurrent.value) {\r\n    return\r\n  }\r\n\r\n  // emit both update events to support callers using either v-model argument\r\n  emit('update:currentPage', page)\r\n  emit('update:current', page)\r\n  emit('pageChange', page)\r\n}\r\n\r\nfunction handlePageSizeChange(event: Event) {\r\n  const target = event.target as HTMLSelectElement\r\n  const newSize = parseInt(target.value)\r\n  \r\n  emit('update:pageSize', newSize)\r\n  emit('pageSizeChange', newSize)\r\n  \r\n  // 如果当前页码超出范围，调整到最后一页\r\n  if (displayedCurrent.value > Math.ceil(props.total / newSize)) {\r\n    const lastPage = Math.ceil(props.total / newSize)\r\n    if (lastPage > 0) {\r\n      goToPage(lastPage)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"postcss\">\r\n/* 移动端适配 */\r\n@media (max-width: 640px) {\r\n  nav {\r\n    @apply flex-col items-stretch gap-3;\r\n  }\r\n  \r\n  .flex.items-center.justify-between {\r\n    @apply flex-col gap-3;\r\n  }\r\n  \r\n  .page-numbers {\r\n    @apply order-2;\r\n  }\r\n  \r\n  .pagination {\r\n    @apply justify-center;\r\n  }\r\n}\r\n</style>"],"names":["props","__props","emit","__emit","displayedCurrent","computed","pageSizeId","totalPages","startItem","endItem","visiblePages","makeKey","value","indexHint","_","i","pages","half","start","end","navClasses","pageSizeContainerClasses","pageSizeLabelClasses","pageSizeSelectClasses","pageSizeSuffixClasses","paginationClasses","pageNumbersClasses","ellipsisClasses","infoClasses","infoHighlightClasses","getPageButtonClasses","active","isNavButton","baseClasses","goToPage","page","handlePageSizeChange","event","target","newSize","lastPage","_createElementBlock","_createElementVNode","_Fragment","_renderList","size","_hoisted_2","_cache","$event","_toDisplayString","_hoisted_4"],"mappings":"mmBAmIA,MAAMA,EAAQC,EASRC,EAAOC,EASPC,EAAmBC,EAAS,IAAML,EAAM,aAAeA,EAAM,SAAW,CAAC,EAEzEM,EAAa,aAAa,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,OAAO,EAAG,CAAC,CAAC,GAGjEC,EAAaF,EAAS,IAAM,KAAK,KAAKL,EAAM,MAAQA,EAAM,QAAQ,CAAC,EAEnEQ,EAAYH,EAAS,IAClBL,EAAM,QAAU,EAAI,GAAKI,EAAiB,MAAQ,GAAKJ,EAAM,SAAW,CAChF,EAEKS,EAAUJ,EAAS,IAChB,KAAK,IAAID,EAAiB,MAAQJ,EAAM,SAAUA,EAAM,KAAK,CACrE,EAQKU,EAAeL,EAA2B,IAAM,CACpD,MAAMM,EAAU,CAACC,EAAwBC,IAChC,OAAOD,GAAU,SACpB,QAAQA,CAAK,GACb,YAAYC,CAAS,GAG3B,GAAIN,EAAW,OAASP,EAAM,gBAC5B,OAAO,MAAM,KAAK,CAAE,OAAQO,EAAW,KAAA,EAAS,CAACO,EAAGC,KAAO,CACzD,MAAOA,EAAI,EACX,IAAK,QAAQA,EAAI,CAAC,EAAA,EAClB,EAGJ,MAAMC,EAA0B,CAAA,EAC1BC,EAAO,KAAK,MAAMjB,EAAM,gBAAkB,CAAC,EAEjD,IAAIkB,EAAQ,KAAK,IAAI,EAAGd,EAAiB,MAAQa,CAAI,EACrD,MAAME,EAAM,KAAK,IAAIZ,EAAW,MAAOW,EAAQlB,EAAM,gBAAkB,CAAC,EAEpEmB,EAAMD,EAAQ,EAAIlB,EAAM,kBAC1BkB,EAAQ,KAAK,IAAI,EAAGC,EAAMnB,EAAM,gBAAkB,CAAC,GAGjDkB,EAAQ,IACVF,EAAM,KAAK,CAAE,MAAO,EAAG,IAAKL,EAAQ,EAAGK,EAAM,MAAM,EAAG,EAClDE,EAAQ,GACVF,EAAM,KAAK,CAAE,MAAO,MAAO,IAAKL,EAAQ,MAAOK,EAAM,MAAM,EAAG,GAIlE,QAASD,EAAIG,EAAOH,GAAKI,EAAKJ,IAC5BC,EAAM,KAAK,CAAE,MAAOD,EAAG,IAAKJ,EAAQI,EAAGC,EAAM,MAAM,EAAG,EAGxD,OAAIG,EAAMZ,EAAW,QACfY,EAAMZ,EAAW,MAAQ,GAC3BS,EAAM,KAAK,CAAE,MAAO,MAAO,IAAKL,EAAQ,MAAOK,EAAM,MAAM,EAAG,EAEhEA,EAAM,KAAK,CAAE,MAAOT,EAAW,MAAO,IAAKI,EAAQJ,EAAW,MAAOS,EAAM,MAAM,CAAA,CAAG,GAG/EA,CACT,CAAC,EAGKI,EAAa,CACjB,OACA,eACA,kBACA,YACA,QACA,MAAA,EAGIC,EAA2B,CAC/B,OACA,eACA,QACA,SAAA,EAGIC,EAAuB,CAC3B,mBACA,mBAAA,EAGIC,EAAwB,CAC5B,OACA,OACA,SACA,qBACA,aACA,WACA,UACA,qBACA,eACA,yBACA,0BAAA,EAGIC,EAAwB,CAC5B,mBACA,mBAAA,EAGIC,EAAoB,CACxB,OACA,eACA,OAAA,EAGIC,EAAqB,CACzB,OACA,eACA,OAAA,EAGIC,EAAkB,CACtB,OACA,OACA,mBACA,aAAA,EAGIC,EAAc,CAClB,UACA,mBACA,mBAAA,EAGIC,EAAuB,CAC3B,cACA,kBAAA,EAIF,SAASC,EAAqBC,EAAS,GAAOC,EAAc,GAAO,CACjE,MAAMC,EAAc,CAClB,OACA,OACA,UACA,cACA,oBACA,aACA,qBACA,eACA,qBAAA,EAGF,OAAID,GACFC,EAAY,KACV,cACA,eACA,OAAA,EAIAF,EACFE,EAAY,KACV,iBACA,aACA,gBAAA,EAGFA,EAAY,KACV,mBACA,yBACA,sBACA,wBAAA,GAIA7B,EAAiB,OAAS,GAAK,CAAC4B,GAEzB5B,EAAiB,OAASG,EAAW,OAAS,CAACyB,IACxDC,EAAY,KAAK,qBAAsB,YAAY,EAG9CA,CACT,CAGA,SAASC,EAASC,EAAc,CAC1BA,EAAO,GAAKA,EAAO5B,EAAW,OAAS4B,IAAS/B,EAAiB,QAKrEF,EAAK,qBAAsBiC,CAAI,EAC/BjC,EAAK,iBAAkBiC,CAAI,EAC3BjC,EAAK,aAAciC,CAAI,EACzB,CAEA,SAASC,EAAqBC,EAAc,CAC1C,MAAMC,EAASD,EAAM,OACfE,EAAU,SAASD,EAAO,KAAK,EAMrC,GAJApC,EAAK,kBAAmBqC,CAAO,EAC/BrC,EAAK,iBAAkBqC,CAAO,EAG1BnC,EAAiB,MAAQ,KAAK,KAAKJ,EAAM,MAAQuC,CAAO,EAAG,CAC7D,MAAMC,EAAW,KAAK,KAAKxC,EAAM,MAAQuC,CAAO,EAC5CC,EAAW,GACbN,EAASM,CAAQ,CAErB,CACF,mBArWEC,EAiHM,MAAA,CAhHH,QAAOrB,CAAU,EAClB,KAAK,aACL,aAAW,MAAA,GAIHnB,EAAA,kBADRwC,EAyBM,MAAA,OAvBH,QAAOpB,CAAwB,CAAA,GAEhCqB,EAKQ,QAAA,CAJL,IAAKpC,EACL,QAAOgB,CAAoB,CAAA,EAC7B,QAED,EACAoB,EAaS,SAAA,CAZN,GAAIpC,EACJ,MAAOL,EAAA,SACP,QAAOsB,CAAqB,EAC5B,SAAQa,CAAA,UAETK,EAMSE,EAAA,KAAAC,EALQ3C,EAAA,gBAAR4C,QADTJ,EAMS,SAAA,CAJN,IAAKI,EACL,MAAOA,CAAA,IAELA,CAAI,EAAA,EAAAC,CAAA,iBAGXJ,EAA6C,OAAA,CAAtC,QAAOlB,CAAqB,CAAA,EAAE,GAAC,CAAA,aAIxCkB,EAqEM,MAAA,CArEA,QAAOjB,CAAiB,CAAA,GAE5BiB,EAmBS,SAAA,CAlBN,SAAUtC,EAAA,OAAgB,EAC1B,QAAO0B,EAAoB,GAAA,EAAA,CAAA,EAC3B,QAAKiB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAEd,EAAS9B,EAAA,MAAgB,CAAA,EAAA,mBAEjCsC,EAYM,MAAA,CAXJ,MAAM,eACN,KAAK,OACL,OAAO,eACP,QAAQ,WAAA,GAERA,EAKE,OAAA,CAJA,iBAAe,QACf,kBAAgB,QAChB,eAAa,IACb,EAAE,iBAAA,UAEA,QAER,EAAA,CAAA,UAGAA,EAsBM,MAAA,CAtBA,QAAOhB,CAAkB,CAAA,UAC7Be,EAoBWE,EAAA,KAAAC,EAnBMlC,EAAA,MAARyB,aACD,IAAAA,EAAK,GAAA,GAIHA,EAAK,QAAK,WADlBM,EAKO,OAAA,OAHJ,QAAOd,CAAe,CAAA,EACxB,OAED,QAEAc,EAOS,SAAA,OALN,QAAOX,EAAqBK,EAAK,QAAU/B,EAAA,KAAgB,CAAA,EAC3D,SAAU+B,EAAK,QAAU/B,EAAA,MACzB,QAAK4C,GAAEd,EAASC,EAAK,KAAK,CAAA,EAExBc,EAAAd,EAAK,KAAK,EAAA,GAAAe,CAAA,EAAA,gBAMnBR,EAmBS,SAAA,CAlBN,SAAUtC,EAAA,OAAoBG,EAAA,MAC9B,QAAOuB,EAAoB,GAAA,EAAA,CAAA,EAC3B,QAAKiB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAEd,EAAS9B,EAAA,MAAgB,CAAA,EAAA,qBAClC,QAEC,EAAA,EAAAsC,EAYM,MAAA,CAXJ,MAAM,eACN,KAAK,OACL,OAAO,eACP,QAAQ,WAAA,GAERA,EAKE,OAAA,CAJA,iBAAe,QACf,kBAAgB,QAChB,eAAa,IACb,EAAE,cAAA,mBAQFzC,EAAA,cADRwC,EAMM,MAAA,OAJH,QAAOb,CAAW,CAAA,iBACpB,QACK,EAAA,GAAAc,EAA0D,OAAA,CAAnD,QAAOb,CAAoB,CAAA,IAAKrB,EAAA,KAAS,EAAA,CAAA,gBAAU,MAAG,EAAA,GAAAkC,EAAwD,OAAA,CAAjD,QAAOb,CAAoB,CAAA,IAAKpB,EAAA,KAAO,EAAA,CAAA,gBAAU,SACvH,EAAA,GAAAiC,EAAsD,OAAA,CAA/C,QAAOb,CAAoB,CAAA,IAAK5B,EAAA,KAAK,EAAA,CAAA,gBAAU,QAC1D,EAAA,EAAA"}