import{S as tt,C as et,o as X,B as M,L as H,b as Y,r as Z,_ as T,c as J,d as lt,f as nt,g as ot,h as it,a as rt,i as ut}from"./index-BMWbWexx.js";import dt from"./AdminMeetingManager-CnHdQ5V_.js";import ct from"./AdminMemberManager-BS1N6qcR.js";import{l as K,r as y,x as q,k as G,e as Q,C as o,E as t,z as v,B as b,N as S,D as P,F as j,Q as O,I as at,S as E,a0 as N,a1 as R,J as i,K as f,G as L,U as vt,j as st,a as mt,u as x}from"./vendor-vue-KPUYMlG2.js";import{g as pt,d as gt,u as ft,c as yt}from"./project-DmhbM8ze.js";import{B}from"./BaseCard-D1PUeRly.js";import{B as W}from"./BasePagination-DEnt6_dI.js";import{g as ht,d as bt,u as _t,c as $t}from"./article-CCCxI0b9.js";import"./vendor-utils-B9ygI19o.js";import"./MeetingDetailModal-DJiukhCu.js";import"./ListIcon.vue_vue_type_script_setup_true_lang-CZxNQ0Ja.js";import"./MemberCard-COHYwgtT.js";import"./SearchIcon.vue_vue_type_script_setup_true_lang-BvzwYyad.js";import"./zhaoshuyang-hVmsYaGY.js";import"./CalendarIcon-DZZqptbY.js";const kt={class:"admin-project-manager"},Ct={class:"manager-header"},wt={class:"header-actions"},xt={class:"projects-section"},At={key:0,class:"loading-container"},Pt={key:1,class:"empty-state"},Et={key:2,class:"projects-table-container"},Mt={class:"data-table"},St={class:"actions-cell"},zt=["onClick"],Dt=["onClick"],Lt={key:3,class:"pagination-container"},Ft={class:"form-group"},Nt={class:"form-group"},Vt={class:"form-group"},Ut={class:"form-group"},It={class:"form-group"},Bt={class:"form-actions"},jt=K({__name:"AdminProjectManager",setup(z){const d=y([]),c=y(!1),_=y(!1),k=y(1),C=y(1),A=y(0),g=y(10),h=y(!1),p=y(null),m=[],l=(s,e,a="success",D)=>{Z({entity:"projects",action:s,message:e,targetId:D,result:a}).catch(I=>{console.warn("è®°å½•é¡¹ç›®æ“ä½œæ—¥å¿—å¤±è´¥:",I)})},u=q({name:"",description:"",category:et.Development,status:tt.Planning,progress:0}),$=async()=>{c.value=!0;try{const s=await pt({page:k.value-1,size:g.value});Array.isArray(s)?(d.value=s,C.value=1,A.value=s.length):(d.value=s.content||[],C.value=s.totalPages||1,A.value=s.totalElements||d.value.length)}catch(s){console.error("Failed to fetch projects:",s)}finally{c.value=!1}},w=()=>{$(),l("refresh","æ‰‹åŠ¨åˆ·æ–°é¡¹ç›®åˆ—è¡¨")},V=s=>{k.value=s,$()},U=()=>{p.value=null,Object.assign(u,{name:"",description:"",category:et.Development,status:tt.Planning,progress:0}),h.value=!0},F=s=>{p.value=s,Object.assign(u,s),h.value=!0},r=async s=>{if(confirm(`ç¡®å®šè¦åˆ é™¤é¡¹ç›® "${s.name}" å—ï¼Ÿ`))try{await gt(s.id),$(),l("delete",`åˆ é™¤é¡¹ç›®ã€Œ${s.name}ã€`,"success",s.id)}catch{alert("åˆ é™¤å¤±è´¥"),l("delete",`åˆ é™¤é¡¹ç›®ã€Œ${s.name}ã€å¤±è´¥`,"failure",s.id)}},n=async()=>{var s;_.value=!0;try{if(p.value){const e=await ft(p.value.id,u);l("update",`æ›´æ–°é¡¹ç›®ã€Œ${e.name??p.value.name}ã€`,"success",p.value.id)}else{const e=await yt(u);l("create",`åˆ›å»ºé¡¹ç›®ã€Œ${e.name??u.name}ã€`,"success",e.id)}h.value=!1,$()}catch{alert("ä¿å­˜å¤±è´¥");const a=p.value?"update":"create";l(a,`ä¿å­˜é¡¹ç›®ã€Œ${u.name||"æœªå‘½åé¡¹ç›®"}ã€å¤±è´¥`,"failure",(s=p.value)==null?void 0:s.id)}finally{_.value=!1}};return G(()=>{$();const s=X(e=>{(e.entity==="all"||e.entity==="projects")&&($(),l("refresh",`å…¨å±€è§¦å‘ ${e.action??"refresh"} åŒæ­¥é¡¹ç›®æ•°æ®`))});m.push(s)}),Q(()=>{m.forEach(s=>s())}),(s,e)=>(i(),o("div",kt,[t("div",Ct,[e[9]||(e[9]=t("h2",null,"é¡¹ç›®ç®¡ç†",-1)),t("div",wt,[v(M,{variant:"primary",onClick:U},{default:b(()=>[...e[7]||(e[7]=[S(" + æ–°å»ºé¡¹ç›® ",-1)])]),_:1}),v(M,{variant:"secondary",onClick:w},{default:b(()=>[...e[8]||(e[8]=[S(" åˆ·æ–° ",-1)])]),_:1})])]),t("div",xt,[v(B,{class:"content-card"},{default:b(()=>[c.value?(i(),o("div",At,[v(H)])):d.value.length===0?(i(),o("div",Pt,[...e[10]||(e[10]=[t("p",null,"æš‚æ— é¡¹ç›®æ•°æ®",-1)])])):(i(),o("div",Et,[t("table",Mt,[e[11]||(e[11]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"é¡¹ç›®åç§°"),t("th",null,"åˆ†ç±»"),t("th",null,"çŠ¶æ€"),t("th",null,"è¿›åº¦"),t("th",null,"æ“ä½œ")])],-1)),t("tbody",null,[(i(!0),o(j,null,O(d.value,a=>(i(),o("tr",{key:a.id},[t("td",null,f(a.id),1),t("td",null,f(a.name),1),t("td",null,f(a.category),1),t("td",null,[t("span",{class:L(["status-badge",String(a.status??"planning").toLowerCase()])},f(a.status||"æœªè®¾ç½®"),3)]),t("td",null,f(a.progress)+"%",1),t("td",St,[t("button",{class:"action-btn edit",onClick:D=>F(a)}," ç¼–è¾‘ ",8,zt),t("button",{class:"action-btn delete",onClick:D=>r(a)}," åˆ é™¤ ",8,Dt)])]))),128))])])])),C.value>1?(i(),o("div",Lt,[v(W,{current:k.value,"page-size":g.value,total:A.value,onChange:V},null,8,["current","page-size","total"])])):P("",!0)]),_:1})]),v(Y,{show:h.value,"onUpdate:show":e[6]||(e[6]=a=>h.value=a),title:p.value?"ç¼–è¾‘é¡¹ç›®":"æ–°å»ºé¡¹ç›®"},{default:b(()=>[t("form",{class:"edit-form",onSubmit:at(n,["prevent"])},[t("div",Ft,[e[12]||(e[12]=t("label",null,"é¡¹ç›®åç§°",-1)),E(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>u.name=a),type:"text",required:"",class:"form-input"},null,512),[[N,u.name]])]),t("div",Nt,[e[13]||(e[13]=t("label",null,"æè¿°",-1)),E(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>u.description=a),class:"form-textarea"},null,512),[[N,u.description]])]),t("div",Vt,[e[15]||(e[15]=t("label",null,"åˆ†ç±»",-1)),E(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>u.category=a),class:"form-select"},[...e[14]||(e[14]=[t("option",{value:"DEVELOPMENT"}," å¼€å‘ ",-1),t("option",{value:"RESEARCH"}," ç ”ç©¶ ",-1),t("option",{value:"COMPETITION"}," ç«èµ› ",-1)])],512),[[R,u.category]])]),t("div",Ut,[e[17]||(e[17]=t("label",null,"çŠ¶æ€",-1)),E(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>u.status=a),class:"form-select"},[...e[16]||(e[16]=[t("option",{value:"PLANNING"}," è§„åˆ’ä¸­ ",-1),t("option",{value:"ONGOING"}," è¿›è¡Œä¸­ ",-1),t("option",{value:"COMPLETED"}," å·²å®Œæˆ ",-1)])],512),[[R,u.status]])]),t("div",It,[e[18]||(e[18]=t("label",null,"è¿›åº¦ (%)",-1)),E(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>u.progress=a),type:"number",min:"0",max:"100",class:"form-input"},null,512),[[N,u.progress,void 0,{number:!0}]])]),t("div",Bt,[v(M,{type:"button",variant:"secondary",onClick:e[5]||(e[5]=a=>h.value=!1)},{default:b(()=>[...e[19]||(e[19]=[S(" å–æ¶ˆ ",-1)])]),_:1}),v(M,{type:"submit",variant:"primary",loading:_.value},{default:b(()=>[...e[20]||(e[20]=[S(" ä¿å­˜ ",-1)])]),_:1},8,["loading"])])],32)]),_:1},8,["show","title"])]))}}),Ot=T(jt,[["__scopeId","data-v-eeb5d339"]]),Rt={class:"admin-article-manager"},Tt={class:"manager-header"},Kt={class:"header-actions"},Gt={class:"articles-section"},qt={key:0,class:"loading-container"},Ht={key:1,class:"empty-state"},Jt={key:2,class:"articles-table-container"},Qt={class:"data-table"},Wt={class:"actions-cell"},Xt=["onClick"],Yt=["onClick"],Zt={key:3,class:"pagination-container"},te={class:"form-group"},ee={class:"form-group"},se={class:"form-group"},le={class:"form-group"},ae={class:"form-group"},ne={class:"checkbox-group"},oe={class:"form-actions"},ie=K({__name:"AdminArticleManager",setup(z){const d=y([]),c=y(!1),_=y(!1),k=y(1),C=y(10),A=y(1),g=y(0),h=y(!1),p=y(null),m=[],l=(s,e,a="success",D)=>{Z({entity:"articles",action:s,message:e,targetId:D,result:a}).catch(I=>{console.warn("è®°å½•æ–‡ç« æ“ä½œæ—¥å¿—å¤±è´¥:",I)})},u=q({title:"",summary:"",content:"",category:"",isPublished:!1}),$=async()=>{c.value=!0;try{const s=await ht({page:k.value-1,size:C.value});d.value=s.content,A.value=s.totalPages,g.value=s.totalElements,C.value=s.size,k.value=s.number+1}catch(s){console.error("Failed to fetch articles:",s)}finally{c.value=!1}},w=()=>{$(),l("refresh","æ‰‹åŠ¨åˆ·æ–°æ–‡ç« åˆ—è¡¨")},V=s=>{k.value=s,$()},U=()=>{p.value=null,Object.assign(u,{title:"",summary:"",content:"",category:"",isPublished:!1}),h.value=!0},F=s=>{p.value=s,Object.assign(u,s),h.value=!0},r=async s=>{if(confirm(`ç¡®å®šè¦åˆ é™¤æ–‡ç«  "${s.title}" å—ï¼Ÿ`))try{await bt(s.id),$(),l("delete",`åˆ é™¤æ–‡ç« ã€Œ${s.title}ã€`,"success",s.id)}catch{alert("åˆ é™¤å¤±è´¥"),l("delete",`åˆ é™¤æ–‡ç« ã€Œ${s.title}ã€å¤±è´¥`,"failure",s.id)}},n=async()=>{var s;_.value=!0;try{if(p.value){const e=await _t(p.value.id,u);l("update",`æ›´æ–°æ–‡ç« ã€Œ${e.title??p.value.title}ã€`,"success",p.value.id)}else{const e=await $t(u);l("create",`åˆ›å»ºæ–‡ç« ã€Œ${e.title??u.title}ã€`,"success",e.id)}h.value=!1,$()}catch{alert("ä¿å­˜å¤±è´¥");const a=p.value?"update":"create";l(a,`ä¿å­˜æ–‡ç« ã€Œ${u.title||"æœªå‘½åæ–‡ç« "}ã€å¤±è´¥`,"failure",(s=p.value)==null?void 0:s.id)}finally{_.value=!1}};return G(()=>{$();const s=X(e=>{(e.entity==="all"||e.entity==="articles")&&($(),l("refresh",`å…¨å±€è§¦å‘ ${e.action??"refresh"} åŒæ­¥æ–‡ç« æ•°æ®`))});m.push(s)}),Q(()=>{m.forEach(s=>s())}),(s,e)=>(i(),o("div",Rt,[t("div",Tt,[e[9]||(e[9]=t("h2",null,"æ–‡ç« ç®¡ç†",-1)),t("div",Kt,[v(M,{variant:"primary",onClick:U},{default:b(()=>[...e[7]||(e[7]=[S(" + æ–°å»ºæ–‡ç«  ",-1)])]),_:1}),v(M,{variant:"secondary",onClick:w},{default:b(()=>[...e[8]||(e[8]=[S(" åˆ·æ–° ",-1)])]),_:1})])]),t("div",Gt,[v(B,{class:"content-card"},{default:b(()=>[c.value?(i(),o("div",qt,[v(H)])):d.value.length===0?(i(),o("div",Ht,[...e[10]||(e[10]=[t("p",null,"æš‚æ— æ–‡ç« æ•°æ®",-1)])])):(i(),o("div",Jt,[t("table",Qt,[e[11]||(e[11]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"æ ‡é¢˜"),t("th",null,"ä½œè€…"),t("th",null,"åˆ†ç±»"),t("th",null,"å‘å¸ƒæ—¶é—´"),t("th",null,"çŠ¶æ€"),t("th",null,"æ“ä½œ")])],-1)),t("tbody",null,[(i(!0),o(j,null,O(d.value,a=>{var D;return i(),o("tr",{key:a.id},[t("td",null,f(a.id),1),t("td",null,f(a.title),1),t("td",null,f(((D=a.author)==null?void 0:D.name)||"æœªçŸ¥"),1),t("td",null,f(a.category),1),t("td",null,f(a.publishDate),1),t("td",null,[t("span",{class:L(["status-badge",a.isPublished?"published":"draft"])},f(a.isPublished?"å·²å‘å¸ƒ":"è‰ç¨¿"),3)]),t("td",Wt,[t("button",{class:"action-btn edit",onClick:I=>F(a)}," ç¼–è¾‘ ",8,Xt),t("button",{class:"action-btn delete",onClick:I=>r(a)}," åˆ é™¤ ",8,Yt)])])}),128))])])])),A.value>1?(i(),o("div",Zt,[v(W,{current:k.value,total:g.value,"page-size":C.value,onChange:V},null,8,["current","total","page-size"])])):P("",!0)]),_:1})]),v(Y,{show:h.value,"onUpdate:show":e[6]||(e[6]=a=>h.value=a),title:p.value?"ç¼–è¾‘æ–‡ç« ":"æ–°å»ºæ–‡ç« "},{default:b(()=>[t("form",{class:"edit-form",onSubmit:at(n,["prevent"])},[t("div",te,[e[12]||(e[12]=t("label",null,"æ ‡é¢˜",-1)),E(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>u.title=a),type:"text",required:"",class:"form-input"},null,512),[[N,u.title]])]),t("div",ee,[e[13]||(e[13]=t("label",null,"æ‘˜è¦",-1)),E(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>u.summary=a),class:"form-textarea"},null,512),[[N,u.summary]])]),t("div",se,[e[14]||(e[14]=t("label",null,"å†…å®¹",-1)),E(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=a=>u.content=a),class:"form-textarea content-editor"},null,512),[[N,u.content]])]),t("div",le,[e[15]||(e[15]=t("label",null,"åˆ†ç±»",-1)),E(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>u.category=a),type:"text",class:"form-input"},null,512),[[N,u.category]])]),t("div",ae,[e[17]||(e[17]=t("label",null,"çŠ¶æ€",-1)),t("div",ne,[E(t("input",{id:"isPublished","onUpdate:modelValue":e[4]||(e[4]=a=>u.isPublished=a),type:"checkbox"},null,512),[[vt,u.isPublished]]),e[16]||(e[16]=t("label",{for:"isPublished"},"å‘å¸ƒ",-1))])]),t("div",oe,[v(M,{type:"button",variant:"secondary",onClick:e[5]||(e[5]=a=>h.value=!1)},{default:b(()=>[...e[18]||(e[18]=[S(" å–æ¶ˆ ",-1)])]),_:1}),v(M,{type:"submit",variant:"primary",loading:_.value},{default:b(()=>[...e[19]||(e[19]=[S(" ä¿å­˜ ",-1)])]),_:1},8,["loading"])])],32)]),_:1},8,["show","title"])]))}}),re=T(ie,[["__scopeId","data-v-ee3ea87e"]]),ue=async z=>{const d=await J.get("/api/files",{params:z});return lt(d,"è·å–æ–‡ä»¶åˆ—è¡¨å¤±è´¥"),nt(d.data,z)},de=async z=>{const d=new FormData;d.append("file",z);const c=await J.upload("/api/files/upload",d);return ot(c,"ä¸Šä¼ æ–‡ä»¶å¤±è´¥")},ce=async z=>{const d=await J.delete(`/api/files/${z}`);lt(d,"åˆ é™¤æ–‡ä»¶å¤±è´¥")},ve=async(z,d)=>{await J.download(`/api/files/download/${z}`,d)},me={class:"admin-file-manager"},pe={class:"manager-header"},ge={class:"header-actions"},fe={class:"files-section"},ye={key:0,class:"loading-container"},he={key:1,class:"empty-state"},be={key:2,class:"files-table-container"},_e={class:"data-table"},$e={class:"actions-cell"},ke=["onClick"],Ce=["onClick"],we={key:3,class:"pagination-container"},xe=K({__name:"AdminFileManager",setup(z){const d=y([]),c=y(!1),_=y(1),k=y(10),C=y(1),A=y(0),g=y(null),h=[],p=(r,n,s="success",e)=>{Z({entity:"files",action:r,message:n,targetId:e,result:s}).catch(a=>{console.warn("è®°å½•æ–‡ä»¶æ“ä½œæ—¥å¿—å¤±è´¥:",a)})},m=async()=>{c.value=!0;try{const r=await ue({page:_.value-1,size:k.value});d.value=r.content,C.value=r.totalPages,A.value=r.totalElements,k.value=r.size,_.value=r.number+1}catch(r){console.error("Failed to fetch files:",r)}finally{c.value=!1}},l=()=>{m(),p("refresh","æ‰‹åŠ¨åˆ·æ–°æ–‡ä»¶åˆ—è¡¨")},u=r=>{_.value=r,m()},$=()=>{var r;(r=g.value)==null||r.click()},w=async r=>{const n=r.target;if(n.files&&n.files.length>0){const s=n.files[0];try{await de(s),alert("ä¸Šä¼ æˆåŠŸ"),m(),p("create",`ä¸Šä¼ æ–‡ä»¶ã€Œ${s.name}ã€`,"success")}catch{alert("ä¸Šä¼ å¤±è´¥"),p("create",`ä¸Šä¼ æ–‡ä»¶ã€Œ${s.name}ã€å¤±è´¥`,"failure")}finally{n.value=""}}},V=async r=>{try{await ve(r.id,r.originalName),p("export",`ä¸‹è½½æ–‡ä»¶ã€Œ${r.originalName}ã€`,"success",r.id)}catch{alert("ä¸‹è½½å¤±è´¥"),p("export",`ä¸‹è½½æ–‡ä»¶ã€Œ${r.originalName}ã€å¤±è´¥`,"failure",r.id)}},U=async r=>{if(confirm(`ç¡®å®šè¦åˆ é™¤æ–‡ä»¶ "${r.originalName}" å—ï¼Ÿ`))try{await ce(r.id),m(),p("delete",`åˆ é™¤æ–‡ä»¶ã€Œ${r.originalName}ã€`,"success",r.id)}catch{alert("åˆ é™¤å¤±è´¥"),p("delete",`åˆ é™¤æ–‡ä»¶ã€Œ${r.originalName}ã€å¤±è´¥`,"failure",r.id)}},F=r=>{if(r===0)return"0 B";const n=1024,s=["B","KB","MB","GB","TB"],e=Math.floor(Math.log(r)/Math.log(n));return parseFloat((r/Math.pow(n,e)).toFixed(2))+" "+s[e]};return G(()=>{m();const r=X(n=>{(n.entity==="all"||n.entity==="files")&&(m(),p("refresh",`å…¨å±€è§¦å‘ ${n.action??"refresh"} åŒæ­¥æ–‡ä»¶æ•°æ®`))});h.push(r)}),Q(()=>{h.forEach(r=>r())}),(r,n)=>(i(),o("div",me,[t("div",pe,[n[2]||(n[2]=t("h2",null,"æ–‡ä»¶ç®¡ç†",-1)),t("div",ge,[t("input",{ref_key:"fileInput",ref:g,type:"file",style:{display:"none"},onChange:w},null,544),v(M,{variant:"primary",onClick:$},{default:b(()=>[...n[0]||(n[0]=[S(" + ä¸Šä¼ æ–‡ä»¶ ",-1)])]),_:1}),v(M,{variant:"secondary",onClick:l},{default:b(()=>[...n[1]||(n[1]=[S(" åˆ·æ–° ",-1)])]),_:1})])]),t("div",fe,[v(B,{class:"content-card"},{default:b(()=>[c.value?(i(),o("div",ye,[v(H)])):d.value.length===0?(i(),o("div",he,[...n[3]||(n[3]=[t("p",null,"æš‚æ— æ–‡ä»¶æ•°æ®",-1)])])):(i(),o("div",be,[t("table",_e,[n[4]||(n[4]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"æ–‡ä»¶å"),t("th",null,"å¤§å°"),t("th",null,"ç±»å‹"),t("th",null,"ä¸Šä¼ æ—¶é—´"),t("th",null,"ä¸‹è½½æ¬¡æ•°"),t("th",null,"æ“ä½œ")])],-1)),t("tbody",null,[(i(!0),o(j,null,O(d.value,s=>(i(),o("tr",{key:s.id},[t("td",null,f(s.id),1),t("td",null,f(s.originalName),1),t("td",null,f(F(s.fileSize)),1),t("td",null,f(s.fileType),1),t("td",null,f(s.uploadTime),1),t("td",null,f(s.downloadCount),1),t("td",$e,[t("button",{class:"action-btn download",onClick:e=>V(s)}," ä¸‹è½½ ",8,ke),t("button",{class:"action-btn delete",onClick:e=>U(s)}," åˆ é™¤ ",8,Ce)])]))),128))])])])),C.value>1?(i(),o("div",we,[v(W,{current:_.value,total:A.value,"page-size":k.value,onChange:u},null,8,["current","total","page-size"])])):P("",!0)]),_:1})])]))}}),Ae=T(xe,[["__scopeId","data-v-575879dd"]]),Pe={class:"admin-log-viewer"},Ee={class:"viewer-header"},Me={class:"header-actions"},Se={class:"log-stats"},ze={class:"stat-value"},De={class:"stat-value"},Le={class:"stat-value"},Fe={class:"filters"},Ne=["value"],Ve=["value"],Ue={key:0,class:"loading-state"},Ie={key:1,class:"empty-state"},Be={key:2,class:"table-wrapper"},je={class:"log-table"},Oe={class:"pill"},Re={class:"message"},Te={key:0,class:"metadata"},Ke={key:3,class:"pagination"},Ge=K({__name:"AdminLogViewer",setup(z){const{logs:d,loading:c,totalLogs:_,lastLog:k,loadLogs:C,removeAllLogs:A}=it(),g=q({search:"",entity:"all",action:"all",result:"all"}),h=q({current:1,pageSize:10}),p=[{label:"ä¾‹ä¼š",value:"meetings"},{label:"æˆå‘˜",value:"members"},{label:"é¡¹ç›®",value:"projects"},{label:"æ–‡ç« ",value:"articles"},{label:"æ–‡ä»¶",value:"files"},{label:"æ—¥å¿—",value:"logs"},{label:"çœ‹æ¿",value:"dashboard"}],m=[{label:"åˆ›å»º",value:"create"},{label:"æ›´æ–°",value:"update"},{label:"åˆ é™¤",value:"delete"},{label:"åˆ·æ–°",value:"refresh"},{label:"å¤åˆ¶",value:"duplicate"},{label:"å¯¼å…¥",value:"import"},{label:"å¯¼å‡º",value:"export"},{label:"ç™»å½•",value:"login"},{label:"é€€å‡º",value:"logout"}],l=st(()=>d.value.filter(n=>{const s=g.entity==="all"||n.entity===g.entity,e=g.action==="all"||n.action===g.action,a=g.result==="all"||n.result===g.result,D=g.search.trim().toLowerCase(),I=D?n.message.toLowerCase().includes(D)||(n.operator||"").toLowerCase().includes(D):!0;return s&&e&&a&&I})),u=st(()=>{const n=(h.current-1)*h.pageSize,s=n+h.pageSize;return l.value.slice(n,s)}),$=n=>{h.current=n},w=async()=>{d.value.length!==0&&confirm("ç¡®è®¤æ¸…ç©ºæ‰€æœ‰ç®¡ç†å‘˜æ“ä½œæ—¥å¿—å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚")&&await A()},V=n=>{const s=p.find(e=>e.value===n);return(s==null?void 0:s.label)??n},U=n=>{const s=m.find(e=>e.value===n);return(s==null?void 0:s.label)??n},F=n=>new Date(n).toLocaleString("zh-CN",{hour12:!1}),r=n=>{try{return Object.entries(n).map(([s,e])=>`${s}: ${e}`).join(" | ")}catch{return""}};return mt(()=>[g.search,g.entity,g.action,g.result],()=>{h.current=1}),G(()=>{C()}),(n,s)=>(i(),o("div",Pe,[t("div",Ee,[s[6]||(s[6]=t("div",null,[t("h2",null,"æ“ä½œæ—¥å¿—"),t("p",{class:"subtext"}," å®æ—¶è¿½è¸ªç®¡ç†å‘˜åœ¨åå°çš„æ‰€æœ‰å…³é”®æ“ä½œ ")],-1)),t("div",Me,[v(x(M),{variant:"secondary",loading:x(c),onClick:x(C)},{default:b(()=>[...s[4]||(s[4]=[S(" åˆ·æ–° ",-1)])]),_:1},8,["loading","onClick"]),v(x(M),{variant:"danger",disabled:x(d).length===0,onClick:w},{default:b(()=>[...s[5]||(s[5]=[S(" æ¸…ç©ºæ—¥å¿— ",-1)])]),_:1},8,["disabled"])])]),t("div",Se,[v(x(B),{class:"stat-card"},{default:b(()=>[s[7]||(s[7]=t("div",{class:"stat-label"}," æ—¥å¿—æ€»æ•° ",-1)),t("div",ze,f(x(_)),1)]),_:1}),v(x(B),{class:"stat-card"},{default:b(()=>[s[8]||(s[8]=t("div",{class:"stat-label"}," æœ€è¿‘ä¸€æ¡ ",-1)),t("div",De,f(x(k)?F(x(k).timestamp):"-"),1)]),_:1}),v(x(B),{class:"stat-card"},{default:b(()=>[s[9]||(s[9]=t("div",{class:"stat-label"}," ç­›é€‰ç»“æœ ",-1)),t("div",Le,f(l.value.length),1)]),_:1})]),v(x(B),null,{default:b(()=>[t("div",Fe,[E(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>g.search=e),class:"filter-input",placeholder:"æœç´¢æè¿°æˆ–æ“ä½œäºº"},null,512),[[N,g.search]]),E(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>g.entity=e)},[s[10]||(s[10]=t("option",{value:"all"}," å…¨éƒ¨å®ä½“ ",-1)),(i(),o(j,null,O(p,e=>t("option",{key:e.value,value:e.value},f(e.label),9,Ne)),64))],512),[[R,g.entity]]),E(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>g.action=e)},[s[11]||(s[11]=t("option",{value:"all"}," å…¨éƒ¨åŠ¨ä½œ ",-1)),(i(),o(j,null,O(m,e=>t("option",{key:e.value,value:e.value},f(e.label),9,Ve)),64))],512),[[R,g.action]]),E(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>g.result=e)},[...s[12]||(s[12]=[t("option",{value:"all"}," å…¨éƒ¨ç»“æœ ",-1),t("option",{value:"success"}," æˆåŠŸ ",-1),t("option",{value:"failure"}," å¤±è´¥ ",-1)])],512),[[R,g.result]])]),x(c)?(i(),o("div",Ue,[v(x(H)),s[13]||(s[13]=t("p",null,"åŠ è½½æ—¥å¿—ä¸­...",-1))])):u.value.length===0?(i(),o("div",Ie,[...s[14]||(s[14]=[t("p",null,"æš‚æ— ç¬¦åˆæ¡ä»¶çš„æ—¥å¿—è®°å½•",-1)])])):(i(),o("div",Be,[t("table",je,[s[15]||(s[15]=t("thead",null,[t("tr",null,[t("th",null,"æ—¶é—´"),t("th",null,"å®ä½“"),t("th",null,"æ“ä½œ"),t("th",null,"æè¿°"),t("th",null,"æ“ä½œäºº"),t("th",null,"çŠ¶æ€")])],-1)),t("tbody",null,[(i(!0),o(j,null,O(u.value,e=>(i(),o("tr",{key:e.id},[t("td",null,f(F(e.timestamp)),1),t("td",null,[t("span",Oe,f(V(e.entity)),1)]),t("td",null,f(U(e.action)),1),t("td",null,[t("div",Re,f(e.message),1),e.metadata?(i(),o("small",Te,f(r(e.metadata)),1)):P("",!0)]),t("td",null,f(e.operator||"ç³»ç»Ÿ"),1),t("td",null,[t("span",{class:L(["result-pill",e.result])},f(e.result==="success"?"æˆåŠŸ":"å¤±è´¥"),3)])]))),128))])])])),l.value.length>h.pageSize?(i(),o("div",Ke,[v(x(W),{current:h.current,"page-size":h.pageSize,total:l.value.length,onChange:$},null,8,["current","page-size","total"])])):P("",!0)]),_:1})]))}}),qe=T(Ge,[["__scopeId","data-v-79a86e5e"]]),He={class:"admin-layout"},Je={class:"admin-header"},Qe={class:"header-content"},We={class:"header-left"},Xe={class:"header-right"},Ye={class:"admin-user"},Ze={class:"user-info"},ts={class:"user-name"},es={class:"user-role"},ss={class:"admin-body"},ls={class:"sidebar-nav"},as={class:"nav-section"},ns={key:0,class:"nav-section-title"},os={class:"nav-list"},is={class:"nav-item"},rs={key:0,class:"nav-text"},us={class:"nav-item"},ds={key:0,class:"nav-text"},cs={class:"nav-item"},vs={key:0,class:"nav-text"},ms={class:"nav-item"},ps={key:0,class:"nav-text"},gs={class:"nav-item"},fs={key:0,class:"nav-text"},ys={class:"nav-section"},hs={key:0,class:"nav-section-title"},bs={class:"nav-list"},_s={class:"nav-item"},$s={key:0,class:"nav-text"},ks={class:"nav-item"},Cs={key:0,class:"nav-text"},ws={class:"admin-main"},xs={class:"main-content"},As={key:0,class:"tab-content"},Ps={key:1,class:"tab-content"},Es={key:2,class:"tab-content"},Ms={key:3,class:"tab-content"},Ss={key:4,class:"tab-content"},zs={key:5,class:"tab-content"},Ds={key:6,class:"tab-content"},Ls={key:7,class:"tab-content"},Fs=K({__name:"AdminLayout",setup(z){rt({title:"ç®¡ç†å‘˜åå°",meta:[{name:"description",content:"åŒºå—é“¾ç»„å®˜æ–¹ç½‘ç«™ç®¡ç†å‘˜åå°"}]});const d=y(!1),c=y("welcome"),_=y(!1),k=y(!1),C=y(null),A=m=>{if((m.ctrlKey||m.metaKey)&&m.key==="m"&&(m.preventDefault(),d.value=!d.value),m.ctrlKey||m.metaKey){const u={1:"meetings",2:"members",3:"projects",4:"articles",5:"settings",6:"logs"}[m.key];u&&(m.preventDefault(),c.value=u)}m.key==="F5"&&(m.preventDefault(),g())},g=()=>{ut({entity:"all",action:"refresh"})},h=()=>{console.log("ğŸšª handleCloseAdmin è¢«è°ƒç”¨"),_.value=!0,console.log("ğŸ“‹ confirmExitModal è®¾ç½®ä¸º:",_.value)},p=async()=>{console.log("âœ… confirmExit è¢«è°ƒç”¨"),k.value=!0;try{console.log("â³ å¼€å§‹é€€å‡ºå¤„ç†..."),await new Promise(m=>setTimeout(m,500)),console.log("â³ é€€å‡ºå¤„ç†å®Œæˆ"),console.log("ğŸ§¹ æ¸…é™¤ç®¡ç†å‘˜çŠ¶æ€..."),C.value=null,localStorage.removeItem("adminToken"),localStorage.removeItem("admin-user"),console.log("ğŸ§¹ çŠ¶æ€æ¸…é™¤å®Œæˆ"),console.log("ğŸ“¢ è§¦å‘ admin-exit äº‹ä»¶"),window.dispatchEvent(new CustomEvent("admin-exit")),console.log("ğŸ“¢ admin-exit äº‹ä»¶å·²å‘é€")}catch(m){console.error("é€€å‡ºå¤±è´¥:",m)}finally{k.value=!1,_.value=!1,console.log("ğŸ confirmExit å®Œæˆï¼Œå¼¹çª—å·²å…³é—­")}};return G(()=>{const m=localStorage.getItem("admin-user");if(m)try{C.value=JSON.parse(m)}catch(l){console.error("è§£æç®¡ç†å‘˜ä¿¡æ¯å¤±è´¥:",l)}document.addEventListener("keydown",A)}),Q(()=>{document.removeEventListener("keydown",A)}),(m,l)=>{var u,$;return i(),o("div",He,[t("header",Je,[t("div",Qe,[t("div",We,[t("button",{class:"menu-toggle",onClick:l[0]||(l[0]=w=>d.value=!d.value)}," â˜° "),l[10]||(l[10]=t("div",{class:"logo-section"},[t("h1",{class:"admin-title"}," ç®¡ç†å‘˜åå° ")],-1))]),t("div",Xe,[t("div",{class:"header-actions"},[t("button",{class:"action-btn refresh-btn",title:"åˆ·æ–°æ•°æ®",onClick:g}," ğŸ”„ "),t("button",{class:"action-btn close-admin-btn",title:"é€€å‡ºç®¡ç†å‘˜æ¨¡å¼",onClick:h}," ğŸšª ")]),t("div",Ye,[t("div",Ze,[t("span",ts,f(((u=C.value)==null?void 0:u.username)||"ç®¡ç†å‘˜"),1),t("span",es,f((($=C.value)==null?void 0:$.role)||"Admin"),1)])])])])]),t("div",ss,[t("aside",{class:L(["admin-sidebar",{collapsed:d.value}])},[t("nav",ls,[t("div",as,[d.value?P("",!0):(i(),o("h3",ns," åŠŸèƒ½ç®¡ç† ")),t("ul",os,[t("li",is,[t("button",{class:L(["nav-link",{active:c.value==="meetings"}]),title:"ä¾‹ä¼šç®¡ç†",onClick:l[1]||(l[1]=w=>c.value="meetings")},[l[11]||(l[11]=t("span",{class:"nav-icon"},"ğŸ“‹",-1)),d.value?P("",!0):(i(),o("span",rs,"ä¾‹ä¼šç®¡ç†"))],2)]),t("li",us,[t("button",{class:L(["nav-link",{active:c.value==="members"}]),title:"æˆå‘˜ç®¡ç†",onClick:l[2]||(l[2]=w=>c.value="members")},[l[12]||(l[12]=t("span",{class:"nav-icon"},"ğŸ‘¥",-1)),d.value?P("",!0):(i(),o("span",ds,"æˆå‘˜ç®¡ç†"))],2)]),t("li",cs,[t("button",{class:L(["nav-link",{active:c.value==="projects"}]),title:"é¡¹ç›®ç®¡ç†",onClick:l[3]||(l[3]=w=>c.value="projects")},[l[13]||(l[13]=t("span",{class:"nav-icon"},"ğŸ“Š",-1)),d.value?P("",!0):(i(),o("span",vs,"é¡¹ç›®ç®¡ç†"))],2)]),t("li",ms,[t("button",{class:L(["nav-link",{active:c.value==="articles"}]),title:"å†…å®¹ç®¡ç†",onClick:l[4]||(l[4]=w=>c.value="articles")},[l[14]||(l[14]=t("span",{class:"nav-icon"},"ğŸ“",-1)),d.value?P("",!0):(i(),o("span",ps,"å†…å®¹ç®¡ç†"))],2)]),t("li",gs,[t("button",{class:L(["nav-link",{active:c.value==="files"}]),title:"æ–‡ä»¶ç®¡ç†",onClick:l[5]||(l[5]=w=>c.value="files")},[l[15]||(l[15]=t("span",{class:"nav-icon"},"ğŸ“",-1)),d.value?P("",!0):(i(),o("span",fs,"æ–‡ä»¶ç®¡ç†"))],2)])])]),t("div",ys,[d.value?P("",!0):(i(),o("h3",hs," ç³»ç»Ÿè®¾ç½® ")),t("ul",bs,[t("li",_s,[t("button",{class:L(["nav-link",{active:c.value==="settings"}]),title:"ç³»ç»Ÿè®¾ç½®",onClick:l[6]||(l[6]=w=>c.value="settings")},[l[16]||(l[16]=t("span",{class:"nav-icon"},"âš™ï¸",-1)),d.value?P("",!0):(i(),o("span",$s,"ç³»ç»Ÿè®¾ç½®"))],2)]),t("li",ks,[t("button",{class:L(["nav-link",{active:c.value==="logs"}]),title:"æ“ä½œæ—¥å¿—",onClick:l[7]||(l[7]=w=>c.value="logs")},[l[17]||(l[17]=t("span",{class:"nav-icon"},"ğŸ“„",-1)),d.value?P("",!0):(i(),o("span",Cs,"æ“ä½œæ—¥å¿—"))],2)])])])])],2),t("main",ws,[t("div",xs,[c.value==="meetings"?(i(),o("div",As,[v(dt)])):c.value==="members"?(i(),o("div",Ps,[v(ct)])):c.value==="projects"?(i(),o("div",Es,[v(Ot)])):c.value==="articles"?(i(),o("div",Ms,[v(re)])):c.value==="files"?(i(),o("div",Ss,[v(Ae)])):c.value==="settings"?(i(),o("div",zs,[...l[18]||(l[18]=[t("div",{class:"coming-soon"},[t("div",{class:"coming-soon-icon"}," âš™ï¸ "),t("h2",null,"ç³»ç»Ÿè®¾ç½®"),t("p",null,"è¯¥åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…...")],-1)])])):c.value==="logs"?(i(),o("div",Ds,[v(qe)])):(i(),o("div",Ls,[...l[19]||(l[19]=[t("div",{class:"welcome-section"},[t("h2",null,"æ¬¢è¿ä½¿ç”¨ç®¡ç†å‘˜åå°"),t("p",null,"é€‰æ‹©å·¦ä¾§èœå•å¼€å§‹ç®¡ç†åŠŸèƒ½")],-1)])]))])])]),v(x(Y),{show:_.value,"onUpdate:show":l[9]||(l[9]=w=>_.value=w),title:"ç¡®è®¤é€€å‡º",size:"sm"},{footer:b(()=>[v(x(M),{variant:"secondary",onClick:l[8]||(l[8]=w=>_.value=!1)},{default:b(()=>[...l[20]||(l[20]=[S(" å–æ¶ˆ ",-1)])]),_:1}),v(x(M),{variant:"danger",loading:k.value,onClick:p},{default:b(()=>[...l[21]||(l[21]=[S(" ç¡®è®¤é€€å‡º ",-1)])]),_:1},8,["loading"])]),default:b(()=>[l[22]||(l[22]=t("p",null,"ç¡®å®šè¦é€€å‡ºç®¡ç†å‘˜åå°å—ï¼Ÿ",-1)),l[23]||(l[23]=t("p",{class:"warning-text"}," é€€å‡ºåéœ€è¦é‡æ–°éªŒè¯èº«ä»½æ‰èƒ½è¿›å…¥ã€‚ ",-1))]),_:1},8,["show"])])}}}),Ws=T(Fs,[["__scopeId","data-v-e0f891c5"]]);export{Ws as default};
//# sourceMappingURL=AdminLayout-C_ET88-L.js.map
